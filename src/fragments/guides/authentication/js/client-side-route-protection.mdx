<!-- # Client-side route protection in React -->

This example shows how to protect routes client-side in React using `withAuthenticator` [higher-order component (HOC)](https://reactjs.org/docs/higher-order-components.html). To get started, first add `@aws-amplify/ui-react` to your project:

<BlockSwitcher>

<Block name="npm">

```bash
npm install @aws-amplify/ui-react
```

</Block>

<Block name="yarn">

```bash
yarn add @aws-amplify/ui-react
```

</Block>

<Block name="pnpm">

```bash
pnpm add @aws-amplify/ui-react
```

</Block>

</BlockSwitcher>

Then, create the `withAuth.tsx` HOC:

```tsx
// src/lib/withAuth.tsx
import { useAuthenticator } from '@aws-amplify/ui-react'
import type { FunctionComponent, PropsWithChildren } from 'react'

type UnknownComponentProps = PropsWithChildren<{
  [key: string]: unknown
}>

/**
 * A higher-order component that wraps a Component with authentication.
 */
function withAuth(Component: FunctionComponent<UnknownComponentProps>) {
  return function WithAuth(props: UnknownComponentProps) {
    // useAuthenticator will require an instance of Authenticator.Provider in the app file
    const { user } = useAuthenticator((context) => [context.user])

    if (!user) {
      return (
        <p>
          You do not have access to this page.
        </p>
      )
    }

    return <Component {...props} />
  }
}

export default withAuth
```

Which can be used to protect a route as shown in the following example based on Next.js:

```tsx
// src/pages/protected.tsx
import { withAuth } from '../lib/withAuth'

function ProtectedPage() {
  return (
    <p>
      This page is protected.
    </p>
  )
}

export default withAuth(ProtectedPage)
```