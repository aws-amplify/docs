The Amplify Auth category provides an interface for authenticating a user. Behind the scenes, it provides the necessary authorization to the other Amplify categories. It comes with default, built-in support for [Amazon Cognito](https://aws.amazon.com/cognito) User Pool and Identity Pool. The Amplify CLI helps you to create and configure the auth category with an authentication provider.

## Goal
To setup and configure your application with Amplify Auth and go through a simple api to check the current auth session

## Prerequisites

import ios0 from "/src/fragments/lib-v1/auth/ios/getting_started/10_preReq.mdx";

<Fragments fragments={{ios: ios0}} />

import android1 from "/src/fragments/lib-v1/auth/android/getting_started/10_preReq.mdx";

<Fragments fragments={{android: android1}} />

## Set Up Backend Resources

To use Authentication with Amplify, you have the option to either have the Amplify CLI setup resources for you, or you can use an existing Amazon Cognito resource in your AWS account.

<BlockSwitcher>
<Block name="Amplify CLI">

To start provisioning auth resources in the backend, go to your project directory and **execute the command**:

```bash
amplify add auth
```

Enter the following when prompted:
```console
? Do you want to use the default authentication and security configuration?
    `Default configuration`
? How do you want users to be able to sign in?
    `Username`
? Do you want to configure advanced settings?
    `No, I am done.`
```

To push your changes to the cloud, **execute the command**:

```bash
amplify push
```

import ios3 from "/src/fragments/lib-v1/auth/ios/getting_started/12_amplifyConfig.mdx";

<Fragments fragments={{ios: ios3}} />

import android4 from "/src/fragments/lib-v1/auth/android/getting_started/12_amplifyConfig.mdx";

<Fragments fragments={{android: android4}} />

</Block>
<Block name="Existing resources">

If you are using the Amplify CLI, an existing Amazon Cognito User Pool and Identity Pool can be used with the Amplify Libraries by running:

```bash
amplify import auth
```

For more details, see how to [Use an existing Cognito User Pool and Identity Pool](/cli/auth/import).

import nativeCommon0 from "/src/fragments/lib-v1/auth/native_common/existing_resources/common.mdx";

<Fragments fragments={{ios: nativeCommon0}} />
<Fragments fragments={{android: nativeCommon0}} />

- **CredentialsProvider**:
  - **Cognito Identity**:
    - **Default**:
      - **PoolID**: ID of the Amazon Cognito Identity Pool (e.g. `us-east-1:123e4567-e89b-12d3-a456-426614174000`)
      - **Region**: AWS Region where the resources are provisioned (e.g. `us-east-1`)
- **CognitoUserPool**:
  - **Default**:
    - **PoolId**: ID of the Amazon Cognito User Pool (e.g. `us-east-1_abcdefghi`)
    - **AppClientId**: ID for the client used to authenticate against the user pool
    - **Region**: AWS Region where the resources are provisioned (e.g. `us-east-1`)
- **Auth**:
  - **Default**:
    - **authenticationFlowType**: The authentication flow type, takes values `USER_SRP_AUTH`, `CUSTOM_AUTH`. Default is `USER_SRP_AUTH`.
    - **OAuth**: Hosted UI Configuration (only include this if using the Hosted UI flow)
      - **Scopes:** Scopes should match the scopes enables in Cognito under "App client settings"
    
Note that before you can add an AWS resource to your application, the application must have the Amplify libraries installed. If you need to perform this step, see [Install Amplify Libraries](/lib-v1/project-setup/create-application#n2-install-amplify-libraries). 

If you are using a Cognito User Pool, without a Cognito Identity Pool, you can omit the **CredentialsProvider** section in the configuration.

</Block>
</BlockSwitcher>

## Install Amplify Libraries

import ios6 from "/src/fragments/lib-v1/auth/ios/getting_started/20_installLib.mdx";

<Fragments fragments={{ios: ios6}} />

import android7 from "/src/fragments/lib-v1/auth/android/getting_started/20_installLib.mdx";

<Fragments fragments={{android: android7}} />

## Initialize Amplify Auth

import ios9 from "/src/fragments/lib-v1/auth/ios/getting_started/30_initAuth.mdx";

<Fragments fragments={{ios: ios9}} />

import android10 from "/src/fragments/lib-v1/auth/android/getting_started/30_initAuth.mdx";

<Fragments fragments={{android: android10}} />

## Check the current auth session

You can now check the current auth session.

import ios12 from "/src/fragments/lib-v1/auth/ios/getting_started/40_fetchSession.mdx";

<Fragments fragments={{ios: ios12}} />

import android13 from "/src/fragments/lib-v1/auth/android/getting_started/40_fetchSession.mdx";

<Fragments fragments={{android: android13}} />

The `isSignedIn` property of the `authSession` will be false since you haven't signed in to the category yet.

## Next Steps
Congratulations! You've successfully setup AWS Cognito Auth plugin.  Check out the following links to see other Amplify Auth use cases:

* [Authenticate a user with username password](/lib-v1/auth/signin)
* [Authenticate a user using a web UI](/lib-v1/auth/signin_web_ui)
* [Authenticate a user with another auth provider](/lib-v1/auth/social_signin_web_ui)
