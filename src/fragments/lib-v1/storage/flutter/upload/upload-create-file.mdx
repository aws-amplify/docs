<BlockSwitcher>

<Block name="Mobile & Desktop">
```dart
import 'dart:io' as io;

import 'package:amplify_storage_s3/amplify_storage_s3.dart';
import 'package:aws_common/vm.dart';

Future<void> uploadIOFile(io.File file) async {
  final awsFile = AWSFilePlatform.fromFile(file);
  try {
    final uploadResult = await Amplify.Storage.uploadFile(
      localFile: awsFile,
      key: 'upload/file.png',
    ).result;
    safePrint('Uploaded file: ${uploadResult.uploadedItem.key}');
  } on StorageException catch (e) {
    safePrint('Error uploading file: ${e.message}');
    rethrow;
  }
}
```
</Block>

<Block name="Web">
```dart
import 'dart:html' as html;

import 'package:amplify_storage_s3/amplify_storage_s3.dart';
import 'package:aws_common/web.dart';

Future<void> uploadHtmlFile(html.File file) async {
  final awsFile = AWSFilePlatform.fromFile(file);
  try {
    final uploadResult = await Amplify.Storage.uploadFile(
      localFile: awsFile,
      key: 'upload/file.png',
    ).result;
    safePrint('Uploaded file: ${uploadResult.uploadedItem.key}');
  } on StorageException catch (e) {
    safePrint('Error uploading file: ${e.message}');
    rethrow;
  }
}
```
</Block>

</BlockSwitcher>
