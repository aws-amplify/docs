The Logger category allows you send your mobile application logs to AWS CloudWatch.

## Prerequisites

import iosPreReq from '/src/fragments/lib/logging/ios/getting_started/10_pre_req.mdx';
import androidPreReq from '/src/fragments/lib/logging/android/getting_started/10_pre_req.mdx';

<Fragments
  fragments={{
    ios: iosPreReq,
    android: androidPreReq
  }}
/>

## Getting Started
To get started using the logger you'll need to setup the following:
1. Create a log group in AWS CloudWatch.  This is will logs will be sent and accessed.
2. Create and add to your mobile app an `amplifyconfiguration_logging.json` file.  This defines where, how often, and what logs are sent.
3. Configure the Amplify Logger category with the AWS CloudWatch Logging Plugin in code.

### Create an AWS CloudWatch log group

You can create and provision a new AWSCloudWatch log group by going through the AWS Console or through AWS CDK.

Here's an example AWS CDK code to provision a new AWSCloudWatch group

```ts
new logs.LogGroup(this, 'Log Group', {
  logGroupName: <log-group-name>,
  retention: logs.RetentionDays.INFINITE
})

const authenticatedRole = iam.Role.fromRoleName(this, "Auth-Role", <amplify-auth-role-name>)
const unAuthenticatedRole = iam.Role.fromRoleName(this, "UnAuth-Role", <amplify-unauth-role-name>)
const logResource = `arn:aws:logs:${region}:${account}:log-group:${logGroupName}:log-stream:*`
const logIAMPolicy = new iam.PolicyStatement({
  effect: iam.Effect.ALLOW,
  resources: [logResource],
  actions: ["logs:PutLogEvents", "logs:DescribeLogStreams", "logs:CreateLogStream"]
})

authenticatedRole.addToPrincipalPolicy(logIAMPolicy)
unAuthenticatedRole.addToPrincipalPolicy(logIAMPolicy)
```

Ensure that both your amplify authenticated and unauthenticated role have the following IAM permission policies

```json
{
  "Action": [
    "logs:CreateLogStream",
    "logs:DescribeLogStreams",
    "logs:PutLogEvents"
  ],
  "Resource": "arn:aws:logs:<region>:<account>:log-group:<log-group-name>:log-stream:*",
  "Effect": "Allow"
}
```

### Create and add logging configuration file
import iosAddConfig from '/src/fragments/lib/logging/ios/getting_started/20_add_configuration.mdx';
import androidAddConfig from '/src/fragments/lib/logging/android/getting_started/20_add_configuration.mdx';

<Fragments
  fragments={{
    ios: iosAddConfig,
    android: androidAddConfig
  }}
/>

The configuration file is the data source for the logging plugin to know where, when and what to send logs.  
The example above configures the logging plugin to automatically send all logs at log level `ERROR` at 60 seconds interval and store logs locally up to 1MB.

### Configure AWSCloudWatchLoggingPlugin in your mobile application.

import iosConfigurePlugin from '/src/fragments/lib/logging/ios/getting_started/30_configure_plugin.mdx';
import androidConfigurePlugin from '/src/fragments/lib/logging/android/getting_started/30_configure_plugin.mdx';

<Fragments
  fragments={{
    ios: iosConfigurePlugin,
    android: androidConfigurePlugin
  }}
/>