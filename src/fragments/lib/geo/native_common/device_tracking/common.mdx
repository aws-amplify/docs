Amplify Geo can be configured to collect and send location data of users to [Amazon Location Service](https://aws.amazon.com/location/).  Tracking capabilities is configurable to provide a balance and flexibility between power efficiency and location accuracy. Location data can also be retrieved and deleted at any point.  

## Configure Location Services Tracker via Amplify CLI

To start provisioning Tracker resources in AWS Location Service,  go to your project directory and execute the command: `amplify add geo`.
The Amplify CLI will prompt configuration options for what type of capability you want to add and default or advanced settings.
```sh
amplify add geo

? Select which capability you want to add: Device location tracking (view device locations and history)
✔ Provide a name for the device location tracker: · devTracker
✔ Who can access this device tracker? · Authorized and Guest users
✔ What kind of access do you want for authenticated users? Select ALL that apply: · Update device position, Read latest device position, Read device position history, List device positions, Delete device position history
✔ What kind of access do you want for guest users? Select ALL that apply: · Update device position, Read latest device position, Read device position history, List device positions, Delete device position history
✅ Created device location tracking resources
✅ Successfully added resource devTracker locally.

```


Once all your configuration is complete run the following command to push the configuration to the backend:
```sh
amplify push
```

## Device Tracking Identification
Amplify Geo associates a location update to a device ID when the locations are sent to Location Service.  The device ID can be provided by you or generated by Amplify Geo.

* User-provided: An device ID provided by you.  Amplify does not guarantee or prevent collisions with other ID. It is up to you to determine if this device ID is consistent across app sessions and devices.
* Tied to user: Amplify generated ID tied to the user but not device.  This ID is consistent across app sessions and devices.
* Tied to device: Amplify generated ID tied to user and device combination.  This ID is consistent across app sessions and users. If a different user logs into the same app on the same device, the same ID is used.  If the app user moves to a new device or uninstall and reinstall the app, then a new ID is generated.
* Tied to user and device: Amplify generated ID tied to both the user and device. This ID is consistent across app sessions.  A new ID is generated if the user authenticates as a different user, moves to a different device, or uninstall/reinstall the app. 

## Tracking Options
Various tracking capabilities are configurable to support your tracking use cases.  Tracking modes are configured via `TrackingSessionOptions` when starting a tracking sessions.  Below are the different tracking options:

import ios0 from "/src/fragments/lib/geo/ios/device_tracking/10_tracking_options.mdx";

<Fragments fragments={{ios: ios0}} />

## Start Tracking
To start a managed tracking session based on a set of tracking session options:

import ios1 from "/src/fragments/lib/geo/ios/device_tracking/20_start_tracking.mdx";

<Fragments fragments={{ios: ios1}} />

## Stop Tracking
To stop an existing tracking session:

import ios2 from "/src/fragments/lib/geo/ios/device_tracking/30_stop_tracking.mdx";

<Fragments fragments={{ios: ios2}} />

Any updates stored locally will be saved.  If there are updates stored locally and the session is configured for offline, then the location will be sent to Location Service when the device is online.

## Manual Location Update
Location update can be sent on-demand outside of the managed tracking.

import ios3 from "/src/fragments/lib/geo/ios/device_tracking/40_manual_update.mdx";

<Fragments fragments={{ios: ios3}} />

## Delete Location History
To delete a device's location history permanently:

import ios4 from "/src/fragments/lib/geo/ios/device_tracking/50_delete_history.mdx";

<Fragments fragments={{ios: ios4}} />