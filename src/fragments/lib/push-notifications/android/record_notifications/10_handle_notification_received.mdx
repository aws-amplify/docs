<Callout>

You do not need to add these APIs to your app if you want to use Amplify with Amazon Pinpoint. You should use these APIs if you are interested in supporting multiple push providers.

</Callout>

## Handle Notification Received

You can display the notification in the system tray if the app is in a background or killed state by calling `Amplify.Notifications.Push.handleNotificationReceived()` from the Messaging Service class. It also calls `recordNotificationReceived` irrespective of the app state  when the device receives a notifications from Pinpoint.

<BlockSwitcher>
<Block name="Java">

```java
class MyAppService extends FirebaseMessagingService() {
    @Override
    public void handleIntent(Intent intent) {
        // Convert the RemoteMessage into a PinpointNotificationPayload
        Bundle data = intent != null ? intent.getExtras() : new Bundle()
        PinpointNotificationPayload notificationPayload = PinpointNotificationPayload.createFromRemoteMessage(new RemoteMessage(data));

        // notificationPayload is null if notification is not sent from Pinpoint
        if (notificationPayload != null) {
            // let Amplify handle foreground and background message received
            Amplify.Notifications.Push.handleNotificationReceived(notificationPayload,
                result -> Log.i("MyAmplifyApp", "Successfully handled a notification"),
                error -> Log.e("MyAmplifyApp", "Error handling notification", error)
            );
        }
    }
}
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
class MyAppService : FirebaseMessagingService() {
    override fun handleIntent(intent: Intent?) {
        // Convert the RemoteMessage into a PinpointNotificationPayload
        val data = intent?.extras ?: Bundle()
        val notificationPayload = PinpointNotificationPayload.createFromRemoteMessage(RemoteMessage(data))

        // notificationPayload is null if notification is not sent from Pinpoint
        if (notificationPayload != null) {
            // let Amplify handle foreground and background message received
            Amplify.Notifications.Push.handleNotificationReceived(notificationPayload,
                { Log.i("MyAmplifyApp", "Successfully handled a notification") },
                { Log.e("MyAmplifyApp", "Error handling notification", error) }
            )
        }
    }
}
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
class MyAppService : FirebaseMessagingService() {
    override fun handleIntent(intent: Intent?) {
        // Convert the RemoteMessage into a PinpointNotificationPayload
        val data = intent?.extras ?: Bundle()
        val notificationPayload = PinpointNotificationPayload.createFromRemoteMessage(RemoteMessage(data))

        // notificationPayload is null if notification is not sent from Pinpoint
        if (notificationPayload != null) {
            try {
                // let Amplify handle foreground and background message received
                Amplify.Notifications.Push.handleNotificationReceived(notificationPayload)
                Log.i("MyAmplifyApp", "Successfully handled a notification")
            } catch (error: PushNotificationsException) {
                Log.e("MyAmplifyApp", "Error handling notification", error)
            }
        }
    }
}
```

</Block>
<Block name="RxJava">

```java
class MyAppService extends FirebaseMessagingService() {
    @Override
    public void handleIntent(Intent intent) {
        // Convert the RemoteMessage into a PinpointNotificationPayload
        Bundle data = intent != null ? intent.getExtras() : new Bundle()
        PinpointNotificationPayload notificationPayload = PinpointNotificationPayload.createFromRemoteMessage(new RemoteMessage(data));

        // notificationPayload is null if notification is not sent from Pinpoint
        if (notificationPayload != null) {
            // let Amplify handle foreground and background message received
            RxAmplify.Notifications.Push.handleNotificationReceived(notificationPayload).subscribe(
                () -> Log.i("MyAmplifyApp", "Successfully handled a notification"),
                error -> Log.e("MyAmplifyApp", "Error handling notification", error)
            );
        }
    }
}
```

</Block>
</BlockSwitcher>
