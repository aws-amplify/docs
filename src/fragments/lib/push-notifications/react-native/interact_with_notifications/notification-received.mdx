## Respond to a notification being received

Push notifications received by your users are useful engagement tools but they also provide a data delivery mechanism to your app!

Your app will likely need to respond to notifications being received in different ways depending on its state, namely while it is either actively in the foreground (where your app may respond by updating UI) or not (where your app may respond by performing tasks to ensure your app experience is up to date).

|        App state        |             Handle with              |
| :---------------------: | :----------------------------------: |
|       Foreground        | `onNotificationReceivedInForeground` |
| Background / Terminated | `onNotificationReceivedInBackground` |

### Notification received in foreground

Notifications received while your app is in the foreground state do not get displayed. But their contents may be useful for updating your app (e.g. updating the UI to reflect a new inbox message).

Add `onNotificationReceivedInForeground` listeners to respond to a push notification being received while your app is in a foreground state.

```js
const myNotificationReceivedHandler = (notification) => {
  // Respond to the received push notification message in realtime
};

const listener = Notifications.Push.onNotificationReceivedInForeground(
  myNotificationReceivedHandler
);

listener.remove(); // Remember to remove the listener when it is no longer needed
```

### Notification received in background

You may be able to improve your users' experience by having your app perform tasks in the background (e.g. fetching data) so they will have the most up-to-date experience when they next launch your app.

Add `onNotificationReceivedInBackground` listeners to respond to a push notification being received while your app is in a background **or** terminated state.

For background notifications to be handled while your app is terminated, it is important to note:

1. You should add this listener to your app's root entry point, i.e. _before_ registering your app component because it will be run via React Native's [Headless JS](https://reactnative.dev/docs/headless-js-android) and your app will not mount/render.
2. Notifications received in a terminated state will be considered low priority by Android unless you increase the priority of the payload by setting the `priority` to `high` (you will need to create a _Raw Message_ in Amazon Pinpoint to set this priority).

```js
// Example index.js
...
Amplify.configure(config);
Notifications.Push.enable();

// Note: This handler does not *need* to be async, but it can be!
const myAsyncNotificationReceivedHandler = async (notification) => {
  // Process the received push notification message in the background
};

// It is recommended that you add this before registering your app component.
// You also shouldn't need to remove this listener if it is added here.
Notifications.Push.onNotificationReceivedInBackground(
  myAsyncNotificationReceivedHandler
);

AppRegistry.registerComponent(appName, () => App);
```
