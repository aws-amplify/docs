The XR category enables you to work with augmented reality (AR) and virtual reality (VR) content within your applications. The XR category has built-in support for Amazon Sumerian.

## Publishing a scene
To download the required scene configuration for your Sumerian scene, visit <a href="https://console.aws.amazon.com/sumerianv2/home" target="_blank">Amazon Sumerian console</a>, create or open the scene you would like to use with AWS Amplify, click *Publish* dropdown from the top right corner of the Sumerian console, then click *Host privately*:

<Callout>

If your scene was already published publicly, you will need to unpublish then publish again using the instructions below.

</Callout>

<br />

![XR](/images/xr/sumerian_host_privately_button.png)
 
You will then be prompted with the following dialog. Click the *Publish* button:
![XR](/images/xr/sumerian_publish_button.png)

Now click the *Download JSON configuration* button to download the scene configuration JSON that will be used for configuring your scene within AWS Amplify:
![XR](/images/xr/amplify_published_dialog.png)

## Setup backend

> Ensure you have [installed and configured the Amplify CLI and library](/start)

```bash
amplify add xr
```
The CLI will prompt configuration options for the XR category such as a scene name identifier and a Sumerian scene json configuration file.

The XR category will set up and utilize the Authentication category to setup scene authorization.

Take note of the scene name you provide in the CLI prompt. This value will be used as an identifier for the scene when using the XR category in the framework.

After configuring your XR options, update your backend with:
```
$ amplify push
```
XR resources shown during `amplify push` represent the IAM policy being created for the scene. This will not change the scene shown in the Sumerian console. To learn more about Sumerian scene authorization visit <a href="https://docs.aws.amazon.com/sumerian/latest/userguide/sumerian-permissions.html" target="_blank">Amazon Sumerian Permissions</a>

A configuration file called `aws-exports.js` will be copied to your configured source directory, for example `./src`. This file will contain a list of all scenes that you configure.

## Import existing XR resource

Add the following code to your application to configure the XR category:
```javascript
import Amplify from 'aws-amplify';
import awsconfig from './aws-exports';
import scene1Config from './sumerian_exports_<sceneId>'; // This file will be generated by the Sumerian AWS Console 

Amplify.configure({
  ...awsconfig,
  XR: { // XR category configuration
    region: 'us-west-2', // Sumerian region
    scenes: { 
      "scene1": { // Friendly scene name
        sceneConfig: scene1Config // Scene configuration from Sumerian publish
      }
    }
  }
});
```

You can add optional publish parameters to the scene configuration:
```javascript
XR.configure({ // XR category configuration
  region: 'us-west-2', // Sumerian region
  scenes: { 
    "scene1": { // Friendly scene name
      sceneConfig: scene1Config // Scene configuration from Sumerian publish
      publishParamOverrides: { alpha: true } // Optional publish parameters
    }
  }
});
```

## Configure frontend

```javascript
import Amplify, { XR } from 'aws-amplify';
import awsconfig from './aws-exports';

Amplify.configure(awsconfig);
```

For more information about using `amplify xr` in the Amplify CLI type `amplify xr help` in your Amplify project.

## Scene Usage

The XR Category allows a Sumerian scene to be rendered into an DIV HTML element with `loadScene` method. When the scene has been loaded the *XR.start()* method will start the scene. To render the scene, pass your scene name and the id of the element in the method call:

```javascript
// Load scene with sceneName: "scene1" into dom element id: "sumerian-scene-dom-id"
async loadAndStartScene() {
    await XR.loadScene("scene1", "sumerian-scene-dom-id");
    XR.start("scene1");
}

// HTML
<div id="sumerian-scene-dom-id"></div>
```

Additionally, you can use the [Sumerian Scene UI components](/lib/xr/sceneapi#ui-components) for an out-of-the-box UI solution.

## API Reference

For a complete XR reference visit the [API Reference](https://aws-amplify.github.io/amplify-js/api/classes/xr.html)
