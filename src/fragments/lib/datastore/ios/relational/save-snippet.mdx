<BlockSwitcher>

<Block name="Async/Await">

```swift
let postWithComments = Post(
    id: "123",
    title: "My post with comments",
    content: "Amplify is Awesome!",
    createdAt: .now(),
    rating: 5,
    status: .published
)

let comment = Comment(
  content: "Loving Amplify DataStore",
  createdAt: .now(),
  post: postWithComments
)

do {
    let postResult = try await Amplify.DataStore.save(postWithComments)
    print("Post with Comment saved! \(postResult)")
} catch let error as DataStoreError {
    print("Failed with error \(error)")
} catch {
    print("Unexpected error \(error)")
}
```

</Block>

<Block name="Combine">

```swift
let postWithComments = Post(
    title: "My post with comments",
    content: "Amplify is Awesome!",
    createdAt: .now(),
    rating: 5,
    status:.published
)

let comment = Comment(content: "Loving Amplify DataStore", post: postWithComments)

let sink = Amplify.Publisher.create {
    try await Amplify.DataStore.save(postWithComments)
}.sink {
    if case let .failure(error) = $0 {
        print("Error adding post and comments - \(error)")
    }
} receiveValue: {
    print("Post and comment saved!")
}
```

</Block>

</BlockSwitcher>
