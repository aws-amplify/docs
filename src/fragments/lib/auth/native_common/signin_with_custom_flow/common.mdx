The Auth category can be configured to perform a [custom authentication flow](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-lambda-challenge.html) defined by you. The following guide shows how to setup a simple passwordless authentication flow.

## Prerequisites

import ios0 from '/src/fragments/lib/auth/ios/getting_started/10_preReq.mdx';

<Fragments fragments={{ swift: ios0 }} />

import android0 from '/src/fragments/lib/auth/android/getting_started/10_preReq.mdx';

<Fragments fragments={{ android: android0 }} />

import flutter0 from '/src/fragments/lib/auth/flutter/getting_started/10_preReq.mdx';

<Fragments fragments={{ flutter: flutter0 }} />

## Configure Auth Category

import ios1 from '/src/fragments/lib/auth/ios/signin_with_custom_flow/10_cli_setup.mdx';

<Fragments fragments={{ swift: ios1 }} />

import android1 from '/src/fragments/lib/auth/android/signin_with_custom_flow/10_cli_setup.mdx';

<Fragments fragments={{ android: android1 }} />

import flutter1 from '/src/fragments/lib/auth/flutter/signin_with_custom_flow/10_cli_setup.mdx';

<Fragments fragments={{ flutter: flutter1 }} />

## Register a user

The CLI flow as mentioned above requires a username and a valid email id as parameters to register a user. Invoke the following api to initiate a sign up flow.

import ios2 from '/src/fragments/lib/auth/ios/signin_with_custom_flow/20_signup.mdx';

<Fragments fragments={{ swift: ios2 }} />

import android2 from '/src/fragments/lib/auth/android/signin_with_custom_flow/20_signup.mdx';

<Fragments fragments={{ android: android2 }} />

import flutter2 from '/src/fragments/lib/auth/flutter/signin_with_custom_flow/20_signup.mdx';

<Fragments fragments={{ flutter: flutter2 }} />

The next step in the sign up flow is to confirm the user. A confirmation code will be sent to the email id provided during sign up. Enter the confirmation code received via email in the `confirmSignUp` call.

import ios3 from '/src/fragments/lib/auth/ios/signin_with_custom_flow/30_confirmSignup.mdx';

<Fragments fragments={{ swift: ios3 }} />

import android3 from '/src/fragments/lib/auth/android/signin_with_custom_flow/30_confirmSignup.mdx';

<Fragments fragments={{ android: android3 }} />

import flutter3 from '/src/fragments/lib/auth/flutter/signin/20_confirmSignUp.mdx';

<Fragments fragments={{ flutter: flutter3 }} />

## Sign in a user

Implement a UI to get the username from the user. After the user enters the username you can start the sign in flow by calling the following method:

import ios4 from '/src/fragments/lib/auth/ios/signin_with_custom_flow/40_signin.mdx';

<Fragments fragments={{ swift: ios4 }} />

import android4 from '/src/fragments/lib/auth/android/signin_with_custom_flow/40_signin.mdx';

<Fragments fragments={{ android: android4 }} />

import flutter4 from '/src/fragments/lib/auth/flutter/signin_with_custom_flow/30_signin.mdx';

<Fragments fragments={{ flutter: flutter4 }} />

## Confirm sign in with custom challenge

Get the custom challenge (`1234` in this case) from the user and pass it to the `confirmSignin()` api.

import ios5 from '/src/fragments/lib/auth/ios/signin_with_custom_flow/50_custom_challenge.mdx';

<Fragments fragments={{ swift: ios5 }} />

import android5 from '/src/fragments/lib/auth/android/signin_with_custom_flow/50_custom_challenge.mdx';

<Fragments fragments={{ android: android5 }} />

import flutter5 from '/src/fragments/lib/auth/flutter/signin_with_custom_flow/40_custom_challenge.mdx';

<Fragments fragments={{ flutter: flutter5 }} />

import flutter6 from '/src/fragments/lib/auth/flutter/signin_with_custom_flow/50_custom_challenge_password_verification.mdx';

<Fragments fragments={{ flutter: flutter6 }} />
