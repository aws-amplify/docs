
When called successfully, the signin APIs will return an `AuthSignInResult`. Inspect the `nextStep` property in the result to see if additional signin steps are required.
The `nextStep` property is of enum type `AuthSignInStep`. Depending on its value, your code should take one of the following actions:

<BlockSwitcher>

<Block name="Java">

```java
try {
      AWSCognitoAuthSignInOptions options = AWSCognitoAuthSignInOptions.builder().authFlowType(AuthFlowType.USER_SRP_AUTH).build();
      Amplify.Auth.signIn(
              "username",
              "password",
              options,
              result ->
              {
                  AuthNextSignInStep nextStep = result.getNextStep();
                  switch (nextStep.getSignInStep()) {
                      case CONFIRM_SIGN_IN_WITH_TOTP_CODE -> {
                          Log.i("AuthQuickstart", "Received next step as confirm sign in with TOTP code");
                          // Prompt the user to enter the TOTP code generated in their authenticator app
                          // Then invoke `confirmSignIn` api with the code
                          break;
                      }
                      case CONTINUE_SIGN_IN_WITH_TOTP_SETUP -> {
                          Log.i("AuthQuickstart", "Received next step as continue sign in by setting up TOTP");
                          Log.i("AuthQuickstart", "Shared secret that will be used to set up TOTP in the authenticator app" + nextStep.getTotpSetupDetails().getSharedSecret());
                          // Prompt the user to enter the TOTP code generated in their authenticator app
                          // Then invoke `confirmSignIn` api with the code
                          break;
                      }
                      case CONTINUE_SIGN_IN_WITH_MFA_SELECTION -> {
                          Log.i("AuthQuickstart", "Received next step as continue sign in by selecting MFA type");
                          Log.i("AuthQuickstart", "Allowed MFA type" + nextStep.getAllowedMFATypes());
                          // Prompt the user to select the MFA type they want to use
                          // Then invoke `confirmSignIn` api with the MFA type
                          break;
                      }
                      case CONFIRM_SIGN_IN_WITH_SMS_MFA_CODE: {
                          Log.i("AuthQuickstart", "SMS code sent to " + nextStep.getCodeDeliveryDetails().getDestination());
                          Log.i("AuthQuickstart", "Additional Info :" + nextStep.getAdditionalInfo());
                          // Prompt the user to enter the SMS MFA code they received
                          // Then invoke `confirmSignIn` api with the code
                          break;
                      }
                      case CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE: {
                          Log.i("AuthQuickstart", "Custom challenge, additional info: " + nextStep.getAdditionalInfo());
                          // Prompt the user to enter custom challenge answer
                          // Then invoke `confirmSignIn` api with the answer
                          break;
                      }
                      case CONFIRM_SIGN_IN_WITH_NEW_PASSWORD: {
                          Log.i("AuthQuickstart", "Sign in with new password, additional info: " + nextStep.getAdditionalInfo());
                          // Prompt the user to enter a new password
                          // Then invoke `confirmSignIn` api with new password
                          break;
                      }
                      case DONE: {
                          Log.i("AuthQuickstart", "SignIn complete");
                          // User has successfully signed in to the app
                          break;
                      }
                  }
              },
              error -> {
                  if (error instanceof UserNotConfirmedException) {
                      // User was not confirmed during the signup process.
                      // Invoke `confirmSignUp` api to confirm the user if
                      // they have the confirmation code. If they do not have the
                      // confirmation code, invoke `resendSignUpCode` to send the
                      // code again.
                      // After the user is confirmed, invoke the `signIn` api again.
                      Log.i("AuthQuickstart", "Signup confirmation required" + error);
                  } else if (error instanceof PasswordResetRequiredException) {
                      // User needs to reset their password.
                      // Invoke `resetPassword` api to start the reset password
                      // flow, and once reset password flow completes, invoke
                      // `signIn` api to trigger signIn flow again.
                      Log.i("AuthQuickstart", "Password reset required" + error);
                  } else {
                      Log.e("AuthQuickstart", "SignIn failed: " + error);
                  }
              }

      );
} catch (Exception error) {
    Log.e("AuthQuickstart", "Unexpected error occurred: " + error);
}
```

</Block>

<Block name="Kotlin - Callbacks">

```kotlin
val options = AWSCognitoAuthSignInOptions.builder().authFlowType(AuthFlowType.USER_SRP_AUTH).build()
try {
      Amplify.Auth.signIn(
          "username",
          "password",
          options,
          { result ->
              val nextStep  = result.nextStep
              when(nextStep.signInStep){
                 AuthSignInStep.CONFIRM_SIGN_IN_WITH_TOTP_CODE -> {
                    Log.i("AuthQuickstart", "Received next step as confirm sign in with TOTP code")
                    // Prompt the user to enter the TOTP code generated in their authenticator app
                    // Then invoke `confirmSignIn` api with the code
                  }
                  AuthSignInStep.CONTINUE_SIGN_IN_WITH_TOTP_SETUP -> {
                      Log.i("AuthQuickstart", "Received next step as continue sign in by setting up TOTP")
                      Log.i("AuthQuickstart", "Shared secret that will be used to set up TOTP in the authenticator app ${nextStep.totpSetupDetails.sharedSecret}")
                      // Prompt the user to enter the TOTP code generated in their authenticator app
                      // Then invoke `confirmSignIn` api with the code
                  }
                  AuthSignInStep.CONTINUE_SIGN_IN_WITH_MFA_SELECTION -> {
                      Log.i("AuthQuickstart", "Received next step as continue sign in by selecting MFA type")
                      Log.i("AuthQuickstart", "Allowed MFA types ${nextStep.allowedMFATypes}")
                      // Prompt the user to select the MFA type they want to use
                      // Then invoke `confirmSignIn` api with the MFA type
                  }
                  AuthSignInStep.CONFIRM_SIGN_IN_WITH_SMS_MFA_CODE -> {
                      Log.i("AuthQuickstart", "SMS code sent to ${nextStep.codeDeliveryDetails?.destination}")
                      Log.i("AuthQuickstart", "Additional Info ${nextStep.additionalInfo}")
                      // Prompt the user to enter the SMS MFA code they received
                      // Then invoke `confirmSignIn` api with the code
                  }
                  AuthSignInStep.CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE -> {
                      Log.i("AuthQuickstart","Custom challenge, additional info: ${nextStep.additionalInfo}")
                      // Prompt the user to enter custom challenge answer
                      // Then invoke `confirmSignIn` api with the answer
                  }
                  AuthSignInStep.CONFIRM_SIGN_IN_WITH_NEW_PASSWORD -> {
                      Log.i("AuthQuickstart", "Sign in with new password, additional info: ${nextStep.additionalInfo}")
                      // Prompt the user to enter a new password
                      // Then invoke `confirmSignIn` api with new password
                  }
                  AuthSignInStep.DONE -> {
                      Log.i("AuthQuickstart", "SignIn complete")
                      // User has successfully signed in to the app
                  }
              }

          }
      ) { error ->
          if (error is UserNotConfirmedException) {
              // User was not confirmed during the signup process.
              // Invoke `confirmSignUp` api to confirm the user if
              // they have the confirmation code. If they do not have the
              // confirmation code, invoke `resendSignUpCode` to send the
              // code again.
              // After the user is confirmed, invoke the `signIn` api again.
              Log.i("AuthQuickstart", "Signup confirmation required", error)
          } else if (error is PasswordResetRequiredException) {
              // User needs to reset their password.
              // Invoke `resetPassword` api to start the reset password
              // flow, and once reset password flow completes, invoke
              // `signIn` api to trigger signIn flow again.
              Log.i("AuthQuickstart", "Password reset required", error)
          } else {
              Log.e("AuthQuickstart", "Unexpected error occurred: $error")
          }
         }
} catch (error: Exception) {
    Log.e("AuthQuickstart", "Unexpected error occurred: $error")
}
```

</Block>

<Block name="Kotlin - Coroutines">

```kotlin
val options =
            AWSCognitoAuthSignInOptions.builder().authFlowType(AuthFlowType.USER_SRP_AUTH).build()
try {
    val result = Amplify.Auth.signIn(
        "username",
        "password",
        options
    )
    val nextStep = result.nextStep
    when (nextStep.signInStep) {
        AuthSignInStep.CONFIRM_SIGN_IN_WITH_TOTP_CODE -> {
            Log.i("AuthQuickstart", "Received next step as confirm sign in with TOTP code")
            // Prompt the user to enter the TOTP code generated in their authenticator app
            // Then invoke `confirmSignIn` api with the code
        }
        AuthSignInStep.CONTINUE_SIGN_IN_WITH_TOTP_SETUP -> {
            Log.i("AuthQuickstart", "Received next step as continue sign in by setting up TOTP")
            Log.i("AuthQuickstart", "Shared secret that will be used to set up TOTP in the authenticator app ${nextStep.totpSetupDetails.sharedSecret}")
            // Prompt the user to enter the TOTP code generated in their authenticator app
            // Then invoke `confirmSignIn` api with the code
        }
        AuthSignInStep.CONTINUE_SIGN_IN_WITH_MFA_SELECTION -> {
            Log.i("AuthQuickstart", "Received next step as continue sign in by selecting MFA type")
            Log.i("AuthQuickstart", "Allowed MFA types ${nextStep.allowedMFATypes}")
            // Prompt the user to select the MFA type they want to use
            // Then invoke `confirmSignIn` api with the MFA type
        }
        AuthSignInStep.CONFIRM_SIGN_IN_WITH_SMS_MFA_CODE -> {
            Log.i("AuthQuickstart", "SMS code sent to ${nextStep.codeDeliveryDetails?.destination}")
            Log.i("AuthQuickstart", "Additional Info ${nextStep.additionalInfo}")
            // Prompt the user to enter the SMS MFA code they received
            // Then invoke `confirmSignIn` api with the code
        }
        AuthSignInStep.CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE -> {
            Log.i("AuthQuickstart", "Custom challenge, additional info: ${nextStep.additionalInfo}")
            // Prompt the user to enter custom challenge answer
            // Then invoke `confirmSignIn` api with the answer
        }
        AuthSignInStep.CONFIRM_SIGN_IN_WITH_NEW_PASSWORD -> {
            Log.i(
                "AuthQuickstart",
                "Sign in with new password, additional info: ${nextStep.additionalInfo}"
            )
            // Prompt the user to enter a new password
            // Then invoke `confirmSignIn` api with new password
        }
        AuthSignInStep.DONE -> {
            Log.i("AuthQuickstart", "SignIn complete")
            // User has successfully signed in to the app
        }
    }
} catch (error: Exception) {
   if (error is UserNotConfirmedException) {
       // User was not confirmed during the signup process.
       // Invoke `confirmSignUp` api to confirm the user if
       // they have the confirmation code. If they do not have the
       // confirmation code, invoke `resendSignUpCode` to send the
       // code again.
       // After the user is confirmed, invoke the `signIn` api again.
       Log.i("AuthQuickstart", "Signup confirmation required", error)
   } else if (error is PasswordResetRequiredException) {
       // User needs to reset their password.
       // Invoke `resetPassword` api to start the reset password
       // flow, and once reset password flow completes, invoke
       // `signIn` api to trigger signIn flow again.
       Log.i("AuthQuickstart", "Password reset required", error)
   } else {
       Log.e("AuthQuickstart", "Unexpected error occurred: $error")
   }
}
```

</Block>

<Block name="RxJava">

```java

AWSCognitoAuthSignInOptions options = AWSCognitoAuthSignInOptions.builder().authFlowType(AuthFlowType.USER_SRP_AUTH).build();
RxAmplify.Auth.signIn("username", "password", options).subscribe(
        result ->
        {
            AuthNextSignInStep nextStep = result.getNextStep();
            switch (nextStep.getSignInStep()) {
                case CONFIRM_SIGN_IN_WITH_TOTP_CODE -> {
                    Log.i("AuthQuickstart", "Received next step as confirm sign in with TOTP code");
                    // Prompt the user to enter the TOTP code generated in their authenticator app
                    // Then invoke `confirmSignIn` api with the code
                    break;
                }
                case CONTINUE_SIGN_IN_WITH_TOTP_SETUP -> {
                    Log.i("AuthQuickstart", "Received next step as continue sign in by setting up TOTP");
                    Log.i("AuthQuickstart", "Shared secret that will be used to set up TOTP in the authenticator app" + nextStep.getTotpSetupDetails().getSharedSecret());
                    // Prompt the user to enter the TOTP code generated in their authenticator app
                    // Then invoke `confirmSignIn` api with the code
                    break;
                }
                case CONTINUE_SIGN_IN_WITH_MFA_SELECTION -> {
                    Log.i("AuthQuickstart", "Received next step as continue sign in by selecting MFA type");
                    Log.i("AuthQuickstart", "Allowed MFA type" + nextStep.getAllowedMFATypes());
                    // Prompt the user to select the MFA type they want to use
                    // Then invoke `confirmSignIn` api with the MFA type
                    break;
                }
                case CONFIRM_SIGN_IN_WITH_SMS_MFA_CODE: {
                    Log.i("AuthQuickstart", "SMS code sent to " + nextStep.getCodeDeliveryDetails().getDestination());
                    Log.i("AuthQuickstart", "Additional Info :" + nextStep.getAdditionalInfo());
                    // Prompt the user to enter the SMS MFA code they received
                    // Then invoke `confirmSignIn` api with the code
                    break;
                }
                case CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE: {
                    Log.i("AuthQuickstart", "Custom challenge, additional info: " + nextStep.getAdditionalInfo());
                    // Prompt the user to enter custom challenge answer
                    // Then invoke `confirmSignIn` api with the answer
                    break;
                }
                case CONFIRM_SIGN_IN_WITH_NEW_PASSWORD: {
                    Log.i("AuthQuickstart", "Sign in with new password, additional info: " + nextStep.getAdditionalInfo());
                    // Prompt the user to enter a new password
                    // Then invoke `confirmSignIn` api with new password
                    break;
                }
                case DONE: {
                    Log.i("AuthQuickstart", "SignIn complete");
                    // User has successfully signed in to the app
                    break;
                }
            }
        },
        error -> {
          if (error instanceof UserNotConfirmedException) {
              // User was not confirmed during the signup process.
              // Invoke `confirmSignUp` api to confirm the user if
              // they have the confirmation code. If they do not have the
              // confirmation code, invoke `resendSignUpCode` to send the
              // code again.
              // After the user is confirmed, invoke the `signIn` api again.
              Log.i("AuthQuickstart", "Signup confirmation required" + error);
          } else if (error instanceof PasswordResetRequiredException) {
              // User needs to reset their password.
              // Invoke `resetPassword` api to start the reset password
              // flow, and once reset password flow completes, invoke
              // `signIn` api to trigger signIn flow again.
              Log.i("AuthQuickstart", "Password reset required" + error);
          } else {
              Log.e("AuthQuickstart", "SignIn failed: " + error);
          }
        }
);
```

</Block>

</BlockSwitcher>
