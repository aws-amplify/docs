export const meta = {
  title: 'Override Amplify-generated Cognito resources',
  description: 'Learn how to override Amplify-generated Cognito resources.'
};

export function getStaticProps(context) {
  return {
    props: {
      meta
    }
  };

}

The Amplify Auth features have default configurations for its features when you use the `amplify/auth/resource.ts` file.

```ts title="amplify/auth/resource.ts"
// amplify/auth/resource.ts
import { defineAuth } from '@aws-amplify/backend';

export const auth = defineAuth({
  loginWith: {
    email: true
  }
});
```

You can customize your authentication resource to enable it to behave exactly as needed for your use cases by modifying it directly using [AWS Cloud Development Kit (CDK)](https://aws.amazon.com/cdk/)

## Override Cognito UserPool password policies

You can override the password policy by using the L1 `cfnUserPool` construct and modifying policies directly.

```ts title="amplify/backend.ts"
// amplify/backend.ts
import { defineBackend } from '@aws-amplify/backend';
import { auth } from './auth/resource';
const backend = defineBackend({
  auth,
});
// extract L1 CfnUserPool resources
const { cfnUserPool } = backend.auth.resources.cfnResources;
// modify cfnUserPool policies directly
cfnUserPool.policies = {
  passwordPolicy: {
    minimumLength: 10,
    requireLowercase: true,
    requireNumbers: true,
    requireSymbols: true,
    requireUppercase: true,
    temporaryPasswordValidityDays: 20,
  },
};
```

## Custom Attributes

The following code will allow you to add custom attributes using the [Userpool schema](https://docs.aws.amazon.com/cdk/api/v1/docs/@aws-cdk_aws-cognito.CfnUserPool.html#schema) property with the L1 `cfnUserPool` construct.

```ts title="amplify/backend.ts"
// amplify/backend.ts
import { defineBackend } from '@aws-amplify/backend';
import { auth } from './auth/resource';
import { data } from './data/resource';

const backend = defineBackend({
  auth,
  data
});

// extract L1 CfnUserPool resources
const { cfnUserPool } = backend.auth.resources.cfnResources;
// modify cfnUserPool schema directly
cfnUserPool.schema = [
  ...(cfnUserPool.schema as any[] || []),
  {
    name: 'publicName',
    attributeDataType: 'String',
    mutable: true,
  },
];
```
