import { getCustomStaticPath } from '@/utils/getCustomStaticPath';

export const meta = {
  title: 'Post data',
  description: 'Using Post, Put, etc. in Amplify',
  platforms: [
    'javascript',
    'react-native',
    'flutter',
    'swift',
    'android',
    'angular',
    'nextjs',
    'react',
    'vue'
  ],
};

export const getStaticPaths = async () => {
  return getCustomStaticPath(meta.platforms);
};

export function getStaticProps(context) {
  return {
    props: {
      platform: context.params.platform,
      meta
    }
  };
}


## POST Requests

Send a POST request with a JSON body.


<InlineFilter filters={['javascript', "angular", "react", "vue", "react-native", "nextjs"]}>
```javascript
import { post } from 'aws-amplify/api';

async function postItem() {
  try {
    const restOperation = post({
      apiName: 'myRestApi',
      path: 'items',
      options: {
        body: {
          message: 'Mow the lawn'
        }
      }
    });

    const { body } = await restOperation.response;
    const response = await body.json();

    console.log('POST call succeeded');
    console.log(response);
  } catch (error) {
    console.log('POST call failed: ', JSON.parse(error.response.body));
  }
}
```
</InlineFilter>

<InlineFilter filters={["swift"]}>
<BlockSwitcher>

<Block name="Async/Await">

```swift
func postItem() async {
    let message = #"{"message": "my new Item"}"#
    let request = RESTRequest(path: "items", body: message.data(using: .utf8))
    do {
        let data = try await Amplify.API.post(request: request)
        let str = String(decoding: data, as: UTF8.self)
        print("Success: \(str)")
    } catch let error as APIError {
        print("Failed due to API error: ", error)
    } catch {
        print("Unexpected error: \(error)")
    }
}
```

</Block>

<Block name="Combine">

```swift
func postItem() -> AnyCancellable {
    let message = #"{"message": "my new Item"}"#
    let request = RESTRequest(path: "items", body: message.data(using: .utf8))
    let sink = Amplify.Publisher.create {
        try await Amplify.API.post(request: request)
    }
    .sink {
        if case let .failure(apiError) = $0 {
            print("Failed", apiError)
        }
    }
    receiveValue: { data in
        let str = String(decoding: data, as: UTF8.self)
        print("Success \(str)")
    }
    return sink
}
```

</Block>

</BlockSwitcher>
</InlineFilter>

<InlineFilter filters={["android"]}>
<BlockSwitcher>
<Block name="Java">

```java
RestOptions options = RestOptions.builder()
    .addPath("items")
    .addBody("{\"name\":\"Mow the lawn\"}".getBytes())
    .build();

Amplify.API.post(options,
    response -> Log.i("MyAmplifyApp", "POST succeeded: " + response),
    error -> Log.e("MyAmplifyApp", "POST failed.", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
val options = RestOptions.builder()
    .addPath("items")
    .addBody("{\"name\":\"Mow the lawn\"}".toByteArray())
    .build()

Amplify.API.post(options,
    { Log.i("MyAmplifyApp", "POST succeeded: $it") },
    { Log.e("MyAmplifyApp", "POST failed", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
val request = RestOptions.builder()
    .addPath("items")
    .addBody("{\"name\":\"Mow the lawn\"}".toByteArray())
    .build()
try {
    val response = Amplify.API.post(request)
    Log.i("MyAmplifyApp", "POST succeeded: $response")
} catch (error: ApiException) {
    Log.e("MyAmplifyApp", "POST failed", error)
}
```

</Block>
<Block name="RxJava">

```java
RestOptions options = RestOptions.builder()
    .addPath("items")
    .addBody("{\"name\":\"Mow the lawn\"}".getBytes())
    .build();

RxAmplify.API.post(options)
    .subscribe(
        response -> Log.i("MyAmplifyApp", "POST succeeded: " + response),
        error -> Log.e("MyAmplifyApp", "POST failed.", error)
    );
```

</Block>
</BlockSwitcher>
</InlineFilter>

<InlineFilter filters={["flutter"]}>
```dart
Future<void> postItem() async {
  try {
    final restOperation = Amplify.API.post(
      'items',
      body: HttpPayload.json({'name': 'Mow the lawn'}),
    );
    final response = await restOperation.response;
    print('POST call succeeded');
    print(response.decodeBody());
  } on ApiException catch (e) {
    print('POST call failed: $e');
  }
}
```
</InlineFilter>

