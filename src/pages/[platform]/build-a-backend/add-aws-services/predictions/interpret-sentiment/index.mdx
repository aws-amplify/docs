import { getCustomStaticPath } from '@/utils/getCustomStaticPath';

export const meta = {
  title: 'Interpret sentiment',
  description: 'Learn how to determine key phrases, sentiment, language, syntax, and entities from text using Amplify.',
  platforms: [
    'swift',
    'android',
    'javascript',
    'angular',
    'nextjs',
    'react',
    'vue'
  ]
};

export const getStaticPaths = async () => {
  return getCustomStaticPath(meta.platforms);
};

export function getStaticProps(context) {
  return {
    props: {
      meta
    }
  };
}

<Callout informational>

**Note:** Make sure to complete the [getting started](../set-up-predictions) section first, where you will set up the IAM roles with the right policy actions

</Callout>

## Working with the API

Analyze text to find key phrases, sentiment (positive, negative, neutral), or the syntax (pronouns, verbs, etc.). You can also find entities in the text such as names or places, or perform language detection.

<InlineFilter filters={['android']}>

Here is an example of sending text for interpretation such as sentiment analysis or natural language characteristics.

<BlockSwitcher>
<Block name="Java">

```java
Amplify.Predictions.interpret(
  "I like to eat spaghetti",
  result -> Log.i("MyAmplifyApp", result.getSentiment().getValue().toString()),
  error -> Log.e("MyAmplifyApp", "Interpret failed", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Predictions.interpret("I like to eat spaghetti",
  { Log.i("MyAmplifyApp", "${it.sentiment?.value}") },
  { Log.e("MyAmplifyApp", "Interpret failed", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
val text = "I like to eat spaghetti"
try {
  val result = Amplify.Predictions.interpret(text)
  Log.i("MyAmplifyApp", "${result.sentiment?.value}")
} catch (error: PredictionsException) {
  Log.e("MyAmplifyApp", "Interpret failed", error)
}
```

</Block>
<Block name="RxJava">

```java
RxAmplify.Predictions.interpret("I like to eat spaghetti")
  .subscribe(
    result -> Log.i("MyAmplifyApp", result.getSentiment().getValue().toString()),
    error -> Log.e("MyAmplifyApp", "Interpret failed", error)
  );
```

</Block>
</BlockSwitcher>

As a result of running this code, you will see the sentiment of the text printed to the console.

```console
I/MyAmplifyApp: POSITIVE
```

</InlineFilter>

<InlineFilter filters={['swift']}>

For analyzing language on iOS we use both AWS backend services as well as Apple's on-device [Natural Language Framework](https://developer.apple.com/documentation/naturallanguage) to provide you with the most accurate results.  If your device is offline, we will return results only Natural Language.  On the other hand, if you are able to connect to AWS Services, we will return a unioned result from both the service and Natural Language.  Switching between backend services and Natural Language is done automatically without any additional configuration required.

<BlockSwitcher>

<Block name="Async/Await">

```swift
func interpret(text: String) async throws -> Predictions.Interpret.Result {
    do {
        let result = try await Amplify.Predictions.interpret(text: text)
        print("Interpreted text: \(result)")
        return result
    } catch let error as PredictionsError {
        print("Error interpreting text: \(error)")
        throw error
    } catch {
        print("Unexpected error: \(error)")
        throw error
    }
}
```

</Block>

<Block name="Combine">

```swift
func interpret(text: String) -> AnyCancellable {
    Amplify.Publisher.create {
        try await Amplify.Predictions.interpret(text: text)
    }
    .sink(receiveCompletion: { completion in
        if case let .failure(error) = completion {
            print("Error interpreting text: \(error)")
        }
    }, receiveValue: { value in
        print("Interpreted text: \(value)")
    })
}
```

</Block>

</BlockSwitcher>


</InlineFilter>

<InlineFilter filters={['javascript','angular','nextjs','react','vue']}>


```js
import { Predictions } from '@aws-amplify/predictions';

const result = await Predictions.interpret({
  text: {
    source: {
      text: textToInterpret,
    },
    type: 'ALL'
  }
})
console.log({ result });
```
</InlineFilter>

