import { getCustomStaticPath } from '@/utils/getCustomStaticPath';

export const meta = {
  title: 'Manage user profiles',
  description: 'Learn how to manage user profiles and add user attributes.',
  platforms: [
    'android',
    'angular',
    'flutter',
    'javascript',
    'nextjs',
    'react',
    'react-native',
    'swift',
    'vue'
  ]
};

export const getStaticPaths = async () => {
  return getCustomStaticPath(meta.platforms);
};

export function getStaticProps(context) {
  return {
    props: {
      meta
    }
  };
}

User profile management helps you keep your applications secure while also personalizing your app experiences. In this guide we will review how you can enable your users to personalize their profile and verify their contact information. This includes outlining how you can set up user attributes, verify them, and allow your users to delete them when necessary.

If you have not yet created an Amplify Gen 2 app, visit the [quickstart](/[platform]/start/quickstart).

## Set up user attributes

User attributes such as email address and phone number help you identify individual users. Defining the user attributes you include for your user profiles makes user data easy to manage at scale. This information will help you personalize user journeys, tailor content, provide intuitive account control, and more. You can capture information upfront during sign-up or enable your users to update their profile after sign-up. In this section we take a closer look at working with user attributes and how to set them up and manage them.

### Add standard attributes

You can build a user profile for your users by adding OIDC standard user attributes using the `amplify/auth/resource.ts` file. Amazon Cognito has a set of default standard attributes that follow this standard.

<Accordion title='Review standard attributes options' headingLevel='4' eyebrow='Learn more'>

There are many user attributes available to use by default in Cognito. Their definitions are based on the [OpenID Connect specification](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims):

- `address`
- `birthdate`
- `email`
- `family_name`
- `gender`
- `given_name`
- `locale`
- `middle_name`
- `name`
- `nickname`
- `phone_number`
- `picture`
- `preferred_username`
- `profile`
- `zoneinfo`
- `updated_at`
- `website`

For more information, visit the [AWS documentation for Amazon Cognito with a list of all the standard attributes](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-attributes.html#cognito-user-pools-standard-attributes).

</Accordion>

The following is an example on how to add a user attribute to your authentication resources.

```ts title="amplify/auth/resource.ts"
import { defineAuth } from '@aws-amplify/backend';

export const auth = defineAuth({
  loginWith: {
    email: true,
  },
// highlight-start
  userAttributes: {
    birthdate: {
      required: false,
      mutable: false,
    },
  },
// highlight-end
});
```

By default, any attributes that you add to your `amplify/auth/resource.ts` file are set to not required and mutable. You can change this behavior by overriding it as shown in the following example.

```ts title="amplify/auth/resource.ts"
import { Auth } from '@aws-amplify/backend';

export const auth = defineAuth({
  loginWith: {
    email: true
  },
  // highlight-start
  userAttributes: {
    // require the attribute be provided during sign-up
    preferredUsername: {
      required: true
    },
    // do not allow changing of an attribute's value
    birthdate: {
      mutable: false
    }
  }
  // highlight-end
});
```

### Pass user attributes during sign-up

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>
You can also create user attributes during sign-up or when the user is authenticated. To do this as part of sign-up you can pass them in the `userAttributes` object of the `signUp` API:

```ts
import { signUp } from 'aws-amplify/auth';

async function handleSignUp() {
  try {
    await signUp({
      username: 'jdoe',
      password: 'mysecurerandompassword#123',
      options: {
        userAttributes: {
          email: 'me@domain.com',
          phone_number: '+12128601234', // E.164 number convention
          given_name: 'Jane',
          family_name: 'Doe',
          nickname: 'Jane'
        }
      }
    });
  } catch (e) {
    console.log(e);
  }
}
```

</InlineFilter>

<InlineFilter filters={['flutter']}>
You can also create user attributes during sign-up or when the user is authenticated. To do this as part of sign-up you can pass them in the `options` object of the `SignUpOptions` object:

```dart
Future<void> signUp() async {
  try {
    final userAttributes = <AuthUserAttributeKey, String>{
      AuthUserAttributeKey.email: 'me@domain.com',
      AuthUserAttributeKey.phoneNumber: '+12128601234',
      AuthUserAttributeKey.givenName: 'Jane',
      AuthUserAttributeKey.familyName: 'Doe',
      AuthUserAttributeKey.nickname: 'Jane',
    };
    final result = await Amplify.Auth.signUp(
      username: 'jdoe',
      password: 'mysecurerandompassword#123',
      options: SignUpOptions(userAttributes: userAttributes),
    );
    safePrint('Result: $result');
  } on AuthException catch (e) {
    safePrint('Error signing up: ${e.message}');
  }
}
```
</InlineFilter>
<InlineFilter filters={['android']}>

You can also create user attributes during sign-up or when the user is authenticated. To do this as part of sign-up you can pass them in the `attributes` object of the `AuthSignUpOptions` object:

<BlockSwitcher>
<Block name="Java">

```java
ArrayList<AuthUserAttribute> attributes = new ArrayList<>();
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.email(), "me@domain.com"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.phoneNumber(), "+12128601234"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.givenName(), "Jane"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.familyName(), "Doe"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.nickname(), "Jane"));

Amplify.Auth.signUp(
    "jdoe",
    "mysecurerandompassword#123",
    AuthSignUpOptions.builder().userAttributes(attributes).build(),
    result -> Log.i("AuthQuickstart", result.toString()),
    error -> Log.e("AuthQuickstart", error.toString())
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
val attrs = mapOf(
    AuthUserAttributeKey.email() to "me@domain.com",
    AuthUserAttributeKey.phoneNumber() to "+12128601234"
    AuthUserAttributeKey.givenName() to "Jane"
    AuthUserAttributeKey.familyName() to "Doe"
    AuthUserAttributeKey.familyName() to "Jane"
)
val options = AuthSignUpOptions.builder()
    .userAttributes(attrs.map { AuthUserAttribute(it.key, it.value) })
    .build()
Amplify.Auth.signUp("jdoe", "mysecurerandompassword#123", options,
    { Log.i("AuthQuickstart", "Sign up result = $it") },
    { Log.e("AuthQuickstart", "Sign up failed", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
val attrs = mapOf(
    AuthUserAttributeKey.email() to "me@domain.com",
    AuthUserAttributeKey.phoneNumber() to "+12128601234"
    AuthUserAttributeKey.givenName() to "Jane"
    AuthUserAttributeKey.familyName() to "Doe"
    AuthUserAttributeKey.familyName() to "Jane"
)
val options = AuthSignUpOptions.builder()
    .userAttributes(attrs.map { AuthUserAttribute(it.key, it.value) })
    .build()
try {
    val result = Amplify.Auth.signUp("jdoe", "mysecurerandompassword#123", options)
    Log.i("AuthQuickstart", "Sign up OK: $result")
} catch (error: AuthException) {
    Log.e("AuthQuickstart", "Sign up failed", error)
}
```

</Block>
<Block name="RxJava">

```java
ArrayList<AuthUserAttribute> attributes = new ArrayList<>();
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.email(), "me@domain.com"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.phoneNumber(), "+12128601234"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.givenName(), "Jane"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.familyName(), "Doe"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.nickname(), "Jane"));

RxAmplify.Auth.signUp(
    "jdoe",
    "mysecurerandompassword#123",
    AuthSignUpOptions.builder().userAttributes(attributes).build())
    .subscribe(
        result -> Log.i("AuthQuickstart", result.toString()),
        error -> Log.e("AuthQuickstart", error.toString())
    );
```

</Block>
</BlockSwitcher>
</InlineFilter>

<InlineFilter filters={['swift']}>
<BlockSwitcher>

<Block name="Async/Await">

```swift
func signUp(
  username: String, 
  password: String, 
  email: String, 
  phonenumber: String,
  givenName: String,
  familyName: String,
  nickname: String,
) async {
    let userAttributes = [
      AuthUserAttribute(.email, value: email), 
      AuthUserAttribute(.phoneNumber, value: phonenumber),
      AuthUserAttribute(.givenName, value: givenName),
      AuthUserAttribute(.familyName, value: familyName),
      AuthUserAttribute(.nickname, value: nickname),
    ]
    let options = AuthSignUpRequest.Options(userAttributes: userAttributes)

    do {
        let signUpResult = try await Amplify.Auth.signUp(
            username: username,
            password: password,
            options: options
        )

        if case let .confirmUser(deliveryDetails, _, userId) = signUpResult.nextStep {
            print("Delivery details \(String(describing: deliveryDetails)) for userId: \(String(describing: userId)))")
        } else {
            print("SignUp Complete")
        }
    } catch let error as AuthError {
        print("An error occurred while registering a user \(error)")
    } catch {
        print("Unexpected error: \(error)")
    }
}
```

</Block>

<Block name="Combine">

```swift
func signUp(
  username: String, 
  password: String, 
  email: String, 
  phonenumber: String,
  givenName: String,
  familyName: String,
  nickname: String,
) -> AnyCancellable {
    let userAttributes = [
      AuthUserAttribute(.email, value: email), 
      AuthUserAttribute(.phoneNumber, value: phonenumber),
      AuthUserAttribute(.givenName, value: givenName),
      AuthUserAttribute(.familyName, value: familyName),
      AuthUserAttribute(.nickname, value: nickname),
    ]
    let options = AuthSignUpRequest.Options(userAttributes: userAttributes)
    Amplify.Publisher.create {
        try await Amplify.Auth.signUp(
            username: username,
            password: password,
            options: options
        )
    }.sink {
        if case let .failure(authError) = $0 {
            print("An error occurred while registering a user \(authError)")
        }
    }
    receiveValue: { signUpResult in
        if case let .confirmUser(deliveryDetails, _, userId) = signUpResult.nextStep {
            print("Delivery details \(String(describing: deliveryDetails)) for userId: \(String(describing: userId)))")
        } else {
            print("SignUp Complete")
        }
    }
    return sink
}
```

</Block>

</BlockSwitcher>

</InlineFilter>
### Configure custom user attributes

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>
Custom attributes can be passed in with the `userAttributes` option of the `signUp` API:

```js
signUp({
  username: 'jdoe',
  password: 'mysecurerandompassword#123',
  options: {
    userAttributes: {
      'custom:attribute_name_1': 'attribute_value_1',
      'custom:attribute_name_2': 'attribute_value_2',
      'custom:attribute_name_3': 'attribute_value_3'
    }
  }
});
```

<Callout warning>

The backend authentication resource authored using `defineAuth` does not currently support adding custom attributes. If you wish to add custom attributes you will need to define them using [overrides](/[platform]/build-a-backend/auth/override-cognito).

</Callout>

</InlineFilter>

<InlineFilter filters={['flutter']}>
Amplify Flutter supports [standard OIDC user attributes](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims) as well as custom attributes. Custom attributes can be instantiated via the custom attribute constructor:

```dart
Future<void> _signUp({
    required String username,
    required String password,
    required String email,
}) async  {
  final userAttributes = {
    AuthUserAttributeKey.email: email,
    // Create and pass a custom attribute
    const CognitoUserAttributeKey.custom('attribute_name_1'): 'attribute_value_1'
    const CognitoUserAttributeKey.custom('attribute_name_2'): 'attribute_value_2'
    const CognitoUserAttributeKey.custom('attribute_name_3'): 'attribute_value_3'
  };
  await Amplify.Auth.signUp(
    username: username,
    password: password,
    options: SignUpOptions(
      userAttributes: userAttributes,
    ),
  );
}
```

When working with a Cognito UserPool, you can set up [custom attributes](/[platform]/build-a-backend/auth/override-cognito/#custom-attributes) by overriding Amazon Cognito with AWS CDK. Although Cognito prepends a "custom:" prefix on the attribute name, there is no need for you to add this in Amplify Flutter's custom attribute constructor.
</InlineFilter>

<InlineFilter filters={['android']}>
<BlockSwitcher>
<Block name="Java">

```java
ArrayList<AuthUserAttribute> attributes = new ArrayList<>();
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.email(), "me@domain.com"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_1"), "attribute_value_1"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_2"), "attribute_value_2"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_3"), "attribute_value_3"));

Amplify.Auth.signUp(
    "jdoe",
    "mysecurerandompassword#123",
    AuthSignUpOptions.builder().userAttributes(attributes).build(),
    result -> Log.i("AuthQuickstart", result.toString()),
    error -> Log.e("AuthQuickstart", error.toString())
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
val attrs = mapOf(
    AuthUserAttributeKey.email() to "me@domain.com",
    AuthUserAttributeKey.custom("custom:attribute_name_1") to "attribute_value_1",
    AuthUserAttributeKey.custom("custom:attribute_name_2") to "attribute_value_2",
    AuthUserAttributeKey.custom("custom:attribute_name_3") to "attribute_value_3",
)
val options = AuthSignUpOptions.builder()
    .userAttributes(attrs.map { AuthUserAttribute(it.key, it.value) })
    .build()
Amplify.Auth.signUp("jdoe", "mysecurerandompassword#123", options,
    { Log.i("AuthQuickstart", "Sign up result = $it") },
    { Log.e("AuthQuickstart", "Sign up failed", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
val attrs = mapOf(
    AuthUserAttributeKey.email() to "me@domain.com",
    AuthUserAttributeKey.custom("custom:attribute_name_1") to "attribute_value_1",
    AuthUserAttributeKey.custom("custom:attribute_name_2") to "attribute_value_2",
    AuthUserAttributeKey.custom("custom:attribute_name_3") to "attribute_value_3",
)
val options = AuthSignUpOptions.builder()
    .userAttributes(attrs.map { AuthUserAttribute(it.key, it.value) })
    .build()
try {
    val result = Amplify.Auth.signUp("jdoe", "mysecurerandompassword#123", options)
    Log.i("AuthQuickstart", "Sign up OK: $result")
} catch (error: AuthException) {
    Log.e("AuthQuickstart", "Sign up failed", error)
}
```

</Block>
<Block name="RxJava">

```java
ArrayList<AuthUserAttribute> attributes = new ArrayList<>();
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.email(), "me@domain.com"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_1"), "attribute_value_1"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_2"), "attribute_value_2"));
attributes.add(new AuthUserAttribute(AuthUserAttributeKey.custom("custom:attribute_name_3"), "attribute_value_3"));

RxAmplify.Auth.signUp(
    "jdoe",
    "mysecurerandompassword#123",
    AuthSignUpOptions.builder().userAttributes(attributes).build())
    .subscribe(
        result -> Log.i("AuthQuickstart", result.toString()),
        error -> Log.e("AuthQuickstart", error.toString())
    );
```

</Block>
</BlockSwitcher>

When working with a Cognito UserPool, you can set up [custom attributes](/[platform]/build-a-backend/auth/override-cognito/#custom-attributes) by overriding Amazon Cognito with AWS CDK. Please keep in mind, Amazon Cognito prepends a "custom:" prefix on the attribute name.
</InlineFilter>


<InlineFilter filters={['swift']}>
<BlockSwitcher>

<Block name="Async/Await">

```swift
func signUp(
  username: String, 
  password: String, 
  email: String, 
) async {
    let userAttributes = [
      AuthUserAttribute(.email, value: email), 
      AuthUserAttribute(.custom("custom:attribute_name_1"), value: "attribute_value_1"),
      AuthUserAttribute(.custom("custom:attribute_name_2"), value: "attribute_value_2"),
      AuthUserAttribute(.custom("custom:attribute_name_3"), value: "attribute_value_3"),
    ]
    let options = AuthSignUpRequest.Options(userAttributes: userAttributes)

    do {
        let signUpResult = try await Amplify.Auth.signUp(
            username: username,
            password: password,
            options: options
        )

        if case let .confirmUser(deliveryDetails, _, userId) = signUpResult.nextStep {
            print("Delivery details \(String(describing: deliveryDetails)) for userId: \(String(describing: userId)))")
        } else {
            print("SignUp Complete")
        }
    } catch let error as AuthError {
        print("An error occurred while registering a user \(error)")
    } catch {
        print("Unexpected error: \(error)")
    }
}
```

</Block>

<Block name="Combine">

```swift
func signUp(
  username: String, 
  password: String, 
  email: String, 
) -> AnyCancellable {
    let userAttributes = [
      AuthUserAttribute(.email, value: email), 
      AuthUserAttribute(.custom("custom:attribute_name_1"), value: "attribute_value_1"),
      AuthUserAttribute(.custom("custom:attribute_name_2"), value: "attribute_value_2"),
      AuthUserAttribute(.custom("custom:attribute_name_3"), value: "attribute_value_3"),
    ]
    let options = AuthSignUpRequest.Options(userAttributes: userAttributes)
    Amplify.Publisher.create {
        try await Amplify.Auth.signUp(
            username: username,
            password: password,
            options: options
        )
    }.sink {
        if case let .failure(authError) = $0 {
            print("An error occurred while registering a user \(authError)")
        }
    }
    receiveValue: { signUpResult in
        if case let .confirmUser(deliveryDetails, _, userId) = signUpResult.nextStep {
            print("Delivery details \(String(describing: deliveryDetails)) for userId: \(String(describing: userId)))")
        } else {
            print("SignUp Complete")
        }
    }
    return sink
}
```

</Block>

</BlockSwitcher>

</InlineFilter>

When working with a Cognito UserPool, you can set up [custom attributes](/[platform]/build-a-backend/auth/override-cognito/#custom-attributes) by overriding Amazon Cognito with AWS CDK. Please keep in mind, Amazon Cognito prepends a "custom:" prefix on the attribute name.

### Retrieve user attributes

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>
You can then retrieve user attributes for your users to read in their profile. This helps you personalize their frontend experience as well as control what they will see.

You can retrieve a user's latest attributes using the `fetchUserAttributes` API.

```js
import { fetchUserAttributes } from 'aws-amplify/auth';

async function handleFetchUserAttributes() {
  try {
    const userAttributes = await fetchUserAttributes();
    console.log(userAttributes);
  } catch (error) {
    console.log(error);
  }
}
```
</InlineFilter>

<InlineFilter filters={['flutter']}>
Invoke the following api to get the list of attributes assigned to the user.

```dart
Future<void> fetchCurrentUserAttributes() async {
  try {
    final result = await Amplify.Auth.fetchUserAttributes();
    for (final element in result) {
      safePrint('key: ${element.userAttributeKey}; value: ${element.value}');
    }
  } on AuthException catch (e) {
    safePrint('Error fetching user attributes: ${e.message}');
  }
}
```
</InlineFilter>

<InlineFilter filters={['android']}>
Invoke the following api to get the list of attributes assigned to the user.
<BlockSwitcher>
<Block name="Java">

```java
Amplify.Auth.fetchUserAttributes(
    attributes -> Log.i("AuthDemo", "User attributes = " + attributes.toString()),
    error -> Log.e("AuthDemo", "Failed to fetch user attributes.", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Auth.fetchUserAttributes(
    { Log.i("AuthDemo", "User attributes = $attributes") },
    { Log.e("AuthDemo", "Failed to fetch user attributes", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
try {
    val attributes = Amplify.Auth.fetchUserAttributes()
    Log.i("AuthDemo", "User attributes = $attributes")
} catch (error: AuthException) {
    Log.e("AuthDemo", "Failed to fetch user attributes", error)
}
```

</Block>
<Block name="RxJava">

```java
RxAmplify.Auth.fetchUserAttributes()
    .doOnSubscribe(() -> Log.i("AuthDemo", "Attributes:"))
    .flatMapObservable(Observable::fromIterable)
    .subscribe(
        eachAttribute -> Log.i("AuthDemo", eachAttribute.toString()),
        error -> Log.e("AuthDemo", "Failed to fetch attributes.", error)
    );
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['swift']}>
Invoke the following api to get the list of attributes assigned to the user.

<BlockSwitcher>

<Block name="Listener (iOS 11+)">

```swift
func fetchAttributes() {
    Amplify.Auth.fetchUserAttributes() { result in
        switch result {
        case .success(let attributes):
            print("User attributes - \(attributes)")
        case .failure(let error):
            print("Fetching user attributes failed with error \(error)")
        }
    }
}
```

</Block>

<Block name="Combine (iOS 13+)">

```swift
func fetchAttributes() -> AnyCancellable {
    Amplify.Auth.fetchUserAttributes()
        .resultPublisher
        .sink {
            if case let .failure(authError) = $0 {
                print("Fetch user attributes failed with error \(authError)")
            }
        }
        receiveValue: { attributes in
            print("User attributes - \(attributes)")
        }
}
```

</Block>

</BlockSwitcher>

</InlineFilter>
<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>

## Enable users to update, verify, and delete specific attributes

You can enable your users to update, verify, and delete specific user attributes as their information changes over time. These attributes are enabled as writable when you update the `Specify write attributes` in your `Auth` configuration.

### Update user attribute

Invoke the `updateUserAttribute` API to create or update existing user attributes.

<BlockSwitcher>
<Block name="TypeScript">

```ts
import {
  updateUserAttribute,
  type UpdateUserAttributeOutput
} from 'aws-amplify/auth';

async function handleUpdateUserAttribute(attributeKey: string, value: string) {
  try {
    const output = await updateUserAttribute({
      userAttribute: {
        attributeKey,
        value
      }
    });
    handleUpdateUserAttributeNextSteps(output);
  } catch (error) {
    console.log(error);
  }
}

function handleUpdateUserAttributeNextSteps(output: UpdateUserAttributeOutput) {
  const { nextStep } = output;

  switch (nextStep.updateAttributeStep) {
    case 'CONFIRM_ATTRIBUTE_WITH_CODE':
      const codeDeliveryDetails = nextStep.codeDeliveryDetails;
      console.log(
        `Confirmation code was sent to ${codeDeliveryDetails?.deliveryMedium}.`
      );
      // Collect the confirmation code from the user and pass to confirmUserAttribute.
      break;
    case 'DONE':
      console.log(`attribute was successfully updated.`);
      break;
  }
}
```

</Block>
<Block name="JavaScript">

```js
import { updateUserAttribute } from 'aws-amplify/auth';

async function handleUpdateUserAttribute(attributeKey, value) {
  try {
    const output = await updateUserAttribute({
      userAttribute: {
        attributeKey,
        value
      }
    });
    handleUpdateUserAttributeNextSteps(output);
  } catch (error) {
    console.log(error);
  }
}

function handleUpdateUserAttributeNextSteps(output) {
  const { nextStep } = output;

  switch (nextStep.updateAttributeStep) {
    case 'CONFIRM_ATTRIBUTE_WITH_CODE':
      const codeDeliveryDetails = nextStep.codeDeliveryDetails;
      console.log(
        `Confirmation code was sent to ${codeDeliveryDetails?.deliveryMedium}.`
      );
      // Collect the confirmation code from the user and pass to confirmUserAttribute.
      break;
    case 'DONE':
      console.log(`attribute was successfully updated.`);
      break;
  }
}
```

</Block>
</BlockSwitcher>


<Callout>

**Note:** If you change an attribute that requires confirmation (i.e. email or phone_number), the user will receive a confirmation code either to their email or cellphone. This code can be used with the confirmUserAttribute API to confirm the change.

</Callout>
</InlineFilter>

### Update user attributes

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>
Invoke the `updateUserAttributes` API to create or update multiple existing user attributes.

<BlockSwitcher>
<Block name="TypeScript">

```ts
import {
  updateUserAttributes,
  type UpdateUserAttributesOutput
} from 'aws-amplify/auth';

async function handleUpdateEmailAndNameAttributes(
  updatedEmail: string,
  updatedName: string
) {
  try {
    const attributes = await updateUserAttributes({
      userAttributes: {
        email: updatedEmail,
        name: updatedName
      }
    });
    // handle next steps
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
<Block name="JavaScript">

```js
import { updateUserAttributes, type UpdateUserAttributesOutput } from 'aws-amplify/auth';

async function handleUpdateEmailAndNameAttributes(
  updatedEmail,
  updatedName
) {
  try {
    const attributes = await updateUserAttributes({
      userAttributes: {
        email: updatedEmail,
        name: updatedName,
      },
    });
   // handle next steps
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['flutter']}>
Invoke the update api for creating new or updating existing user attributes.

To update a single user attribute, call `updateUserAttribute`:

```dart
Future<void> updateUserAttribute() async {
  try {
    final result = await Amplify.Auth.updateUserAttribute(
      userAttributeKey: CognitoUserAttributeKey.email,
      value: 'email@email.com',
    );
    if (result.nextStep.updateAttributeStep == 'CONFIRM_ATTRIBUTE_WITH_CODE') {
      var destination = result.nextStep.codeDeliveryDetails?.destination;
      print('Confirmation code sent to $destination');
    } else {
      print('Update completed');
    }
  } on AmplifyException catch (e) {
    print(e.message);
  }
}
```

To update multiple user attributes at a time, call `updateUserAttributes`:

```dart
Future<void> updateMultipleUserAttributes() async {
  const attributes = [
    AuthUserAttribute(
      userAttributeKey: CognitoUserAttributeKey.email,
      value: 'email@email.com',
    ),
    AuthUserAttribute(
      userAttributeKey: CognitoUserAttributeKey.familyName,
      value: 'MyFamilyName',
    ),
  ];

  try {
    final result = await Amplify.Auth.updateUserAttributes(attributes: attributes);
    result.forEach((key, value) {
      if (value.nextStep.updateAttributeStep == 'CONFIRM_ATTRIBUTE_WITH_CODE') {
        final destination = value.nextStep.codeDeliveryDetails?.destination;
        print('Confirmation code sent to $destination for $key');
      } else {
        print('Update completed for $key');
      }
    });
  } on AmplifyException catch (e) {
    print(e.message);
  }
}
```

</InlineFilter>
<InlineFilter filters={['android']}>
Invoke the update api for creating new or updating existing user attributes.
To update a single user attribute, call `updateUserAttribute`:

<BlockSwitcher>
<Block name="Java">

```java
AuthUserAttribute userEmail =
    new AuthUserAttribute(AuthUserAttributeKey.email(), "email@email.com");
Amplify.Auth.updateUserAttribute(userEmail,
    result -> Log.i("AuthDemo", "Updated user attribute = " + result.toString()),
    error -> Log.e("AuthDemo", "Failed to update user attribute.", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Auth.updateUserAttribute(
    AuthUserAttribute(AuthUserAttributeKey.email(), "email@email.com"),
    { Log.i("AuthDemo", "Updated user attribute = $it") },
    { Log.e("AuthDemo", "Failed to update user attribute.", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
val attribute =
    AuthUserAttribute(AuthUserAttributeKey.email(), "email@email.com")
try {
    val result = Amplify.Auth.updateUserAttribute(attribute)
    Log.i("AuthDemo", "Updated user attribute = $result")
} catch (error: AuthException) {
    Log.e("AuthDemo", "Failed to update user attribute.", error)
}
```

</Block>
<Block name="RxJava">

```java
AuthUserAttribute userEmail =
    new AuthUserAttribute(AuthUserAttributeKey.email(), "email@email.com");
RxAmplify.Auth.updateUserAttribute(userEmail)
    .subscribe(
        result -> Log.i("AuthDemo", "Updated user attribute = " + result.toString()),
        error -> Log.e("AuthDemo", "Failed to update user attribute.", error)
    );
```

</Block>
</BlockSwitcher>

To update multiple user attributes at a time, call `updateUserAttributes`:

<BlockSwitcher>
<Block name="Java">

```java
Amplify.Auth.updateUserAttributes(
    attributes, // attributes is a list of AuthUserAttribute
    result -> Log.i("AuthDemo", "Updated user attributes = " + result.toString()),
    error -> Log.e("AuthDemo", "Failed to update user attributes.", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Auth.updateUserAttributes(
    attributes, // attributes is a list of AuthUserAttribute
    { Log.i("AuthDemo", "Updated user attributes = $it") },
    { Log.e("AuthDemo", "Failed to update user attributes", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
try {
    val result = Amplify.Auth.updateUserAttributes(attributes)
    Log.i("AuthDemo", "Updated user attributes = $result")
} catch (error: AuthException) {
    Log.e("AuthDemo", "Failed to update user attributes", error)
}
```

</Block>
<Block name="RxJava">

```java
// attributes is a list of AuthUserAttribute
RxAmplify.Auth.updateUserAttributes(attributes)
    .subscribe(
        result -> Log.i("AuthDemo", "Updated user attributes = " + result.toString()),
        error -> Log.e("AuthDemo", "Failed to update user attributes.", error)
    );
```

</Block>
</BlockSwitcher>

</InlineFilter>
<InlineFilter filters={['swift']}>
Invoke the update api for creating new or updating existing user attributes.

<BlockSwitcher>

<Block name="Listener (iOS 11+)">

```swift
func updateAttribute() {
    Amplify.Auth.update(userAttribute: AuthUserAttribute(.phoneNumber, value: "+2223334444")) { result in
        do {
            let updateResult = try result.get()
            switch updateResult.nextStep {
            case .confirmAttributeWithCode(let deliveryDetails, let info):
                print("Confirm the attribute with details send to - \(deliveryDetails) \(info)")
            case .done:
                print("Update completed")
            }
        } catch {
            print("Update attribute failed with error \(error)")
        }
    }
}
```

</Block>

<Block name="Combine (iOS 13+)">

```swift
func updateAttribute() -> AnyCancellable {
    Amplify.Auth.update(userAttribute: AuthUserAttribute(.phoneNumber, value: "+2223334444"))
        .resultPublisher
        .sink {
            if case let .failure(authError) = $0 {
                print("Update attribute failed with error \(authError)")
            }
        }
        receiveValue: { updateResult in
            switch updateResult.nextStep {
            case .confirmAttributeWithCode(let deliveryDetails, let info):
                print("Confirm the attribute with details send to - \(deliveryDetails) \(info)")
            case .done:
                print("Update completed")
            }
        }
}
```

</Block>

</BlockSwitcher>

</InlineFilter>
### Verify user attribute

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>
Some attributes require confirmation for the attribute update to complete. If the attribute needs to be confirmed, part of the result of the `updateUserAttribute` or `updateUserAttributes` APIs will be `CONFIRM_ATTRIBUTE_WITH_CODE`. A confirmation code will be sent to the delivery medium mentioned in the delivery details. When the user gets the confirmation code, you can present a UI to the user to enter the code and invoke the `confirmUserAttribute` API with their input:

<BlockSwitcher>
<Block name="TypeScript">

```ts
import {
  confirmUserAttribute,
  type ConfirmUserAttributeInput
} from 'aws-amplify/auth';

async function handleConfirmUserAttribute({
  userAttributeKey,
  confirmationCode
}: ConfirmUserAttributeInput) {
  try {
    await confirmUserAttribute({ userAttributeKey, confirmationCode });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
<Block name="JavaScript">

```js
import { confirmUserAttribute } from 'aws-amplify/auth';

async function handleConfirmUserAttribute({
  userAttributeKey,
  confirmationCode
}) {
  try {
    await confirmUserAttribute({ userAttributeKey, confirmationCode });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['flutter']}>
Some attributes require confirmation for the attribute update to complete. If the attribute need to be confirmed, the result of the above api will be `CONFIRM_ATTRIBUTE_WITH_CODE`. A confirmation code will be sent to the delivery medium mentioned in the delivery details. When the user gets the confirmation code, you can present a UI to the user to enter the code and invoke the confirm attribute api with their input:

```dart
Future<void> verifyAttributeUpdate() async {
  try {
    await Amplify.Auth.confirmUserAttribute(
      userAttributeKey: CognitoUserAttributeKey.email,
      confirmationCode: '390739',
    );
    print('Attribute verified');
  } on AmplifyException catch (e) {
    print(e.message);
  }
}
```

</InlineFilter>
<InlineFilter filters={['android']}>
Some attributes require confirmation for the attribute update to complete. If the attribute need to be confirmed, the result of the above api will be `CONFIRM_ATTRIBUTE_WITH_CODE`. A confirmation code will be sent to the delivery medium mentioned in the delivery details. When the user gets the confirmation code, you can present a UI to the user to enter the code and invoke the confirm attribute api with their input:

<BlockSwitcher>
<Block name="Java">

```java
Amplify.Auth.confirmUserAttribute(AuthUserAttributeKey.email(), "344299",
    () -> Log.i("AuthDemo", "Confirmed user attribute with correct code."),
    error -> Log.e("AuthDemo", "Failed to confirm user attribute. Bad code?", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Auth.confirmUserAttribute(AuthUserAttributeKey.email(), "344299",
    { Log.i("AuthDemo", "Confirmed user attribute with correct code.") },
    { Log.e("AuthDemo", "Failed to confirm user attribute. Bad code?", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
try {
    Amplify.Auth.confirmUserAttribute(AuthUserAttributeKey.email(), "344299")
    Log.i("AuthDemo", "Confirmed user attribute with correct code.") 
} catch (error: AuthException) {
    Log.e("AuthDemo", "Failed to confirm user attribute. Bade code?", error) 
}
```

</Block>
<Block name="RxJava">

```java
RxAmplify.Auth.confirmUserAttribute(AuthUserAttributeKey.email(), "344299")
    .subscribe(
        () -> Log.i("AuthDemo", "Confirmed user attribute using correct code."),
        error -> Log.e("AuthDemo", "Failed to confirm user attribute. Bad code?", error)
    );
```

</Block>
</BlockSwitcher>
</InlineFilter>
<InlineFilter filters={['swift']}>
Some attributes require confirmation for the attribute update to complete. If the attribute need to be confirmed, the result of the above api will be `CONFIRM_ATTRIBUTE_WITH_CODE`. A confirmation code will be sent to the delivery medium mentioned in the delivery details. When the user gets the confirmation code, you can present a UI to the user to enter the code and invoke the confirm attribute api with their input:

<BlockSwitcher>

<Block name="Listener (iOS 11+)">

```swift
func confirmAttribute() {
    Amplify.Auth.confirm(userAttribute: .email, confirmationCode: "390739") { result in
        switch result {
        case .success:
            print("Attribute verified")
        case .failure(let error):
            print("Update attribute failed with error \(error)")
        }
    }
}
```

</Block>

<Block name="Combine (iOS 13+)">

```swift
func confirmAttribute() -> AnyCancellable {
    Amplify.Auth.confirm(userAttribute: .email, confirmationCode: "390739")
        .resultPublisher
        .sink {
            if case let .failure(authError) = $0 {
                print("Update attribute failed with error \(authError)")
            }
        }
        receiveValue: { _ in
            print("Attribute verified")
        }
}
```

</Block>

</BlockSwitcher>
</InlineFilter>
<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>

### Send user attribute verification code

If an attribute needs to be verified while the user is authenticated, invoke the `sendUserAttributeVerificationCode` API as shown below:

<BlockSwitcher>
<Block name="TypeScript">

```ts
import {
  sendUserAttributeVerificationCode,
  type VerifiableUserAttributeKey
} from 'aws-amplify/auth';

async function handleSendUserAttributeVerificationCode(
  key: VerifiableUserAttributeKey
) {
  try {
    await sendUserAttributeVerificationCode({
      userAttributeKey: key
    });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
<Block name="JavaScript">

```js
import { sendUserAttributeVerificationCode } from 'aws-amplify/auth';

async function handleSendUserAttributeVerificationCode(key) {
  try {
    await sendUserAttributeVerificationCode({
      userAttributeKey: key
    });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['flutter']}>
## Resend verification code

The verification code is automatically sent using the preferred method of verification. However, if the code has expired or the user needs to resend the confirmation code, they should invoke the resend API as shown below:

 ```dart
Future<void> resendVerificationCode() async {
  try {
    final result = await Amplify.Auth.resendUserAttributeConfirmationCode(
      userAttributeKey: AuthUserAttributeKey.email,
    );
    _handleCodeDelivery(result.codeDeliveryDetails);
  } on AuthException catch (e) {
    safePrint('Error resending code: ${e.message}');
  }
}
```

</InlineFilter>
<InlineFilter filters={['android']}>
## Resend verification code

The verification code is automatically sent using the preferred method of verification. However, if the code has expired or the user needs to resend the confirmation code, they should invoke the resend API as shown below:

<BlockSwitcher>
<Block name="Java">

```java
Amplify.Auth.resendUserAttributeConfirmationCode(AuthUserAttributeKey.email(),
    result -> Log.i("AuthDemo", "Code was sent again: " + result.toString()),
    error -> Log.e("AuthDemo", "Failed to resend code.", error)
);
```

</Block>
<Block name="Kotlin - Callbacks">

```kotlin
Amplify.Auth.resendUserAttributeConfirmationCode(
    AuthUserAttributeKey.email(),
    { Log.i("AuthDemo", "Code was sent again: $it") },
    { Log.e("AuthDemo", "Failed to resend code", it) }
)
```

</Block>
<Block name="Kotlin - Coroutines">

```kotlin
try {
    val attr = AuthUserAttributeKey.email()
    val result = Amplify.Auth.resendUserAttributeConfirmationCode(attr)
    Log.i("AuthDemo", "Code was sent again: $result."),
} catch (error: AuthException) {
    Log.e("AuthDemo", "Failed to resend code.", error)
}
```

</Block>
<Block name="RxJava">

```java
RxAmplify.Auth.resendUserAttributeConfirmationCode(AuthUserAttributeKey.email())
    .subscribe(
        result -> Log.i("AuthDemo", "Code was resent: " + result.toString()),
        error -> Log.e("AuthDemo", "Failed to resend code.", error)
    );
```

</Block>
</BlockSwitcher>

</InlineFilter>
<InlineFilter filters={['swift']}>
## Resend verification code

The verification code is automatically sent using the preferred method of verification. However, if the code has expired or the user needs to resend the confirmation code, they should invoke the resend API as shown below:

<BlockSwitcher>

<Block name="Async/Await">

```swift
func resendCode() async {
    do {
        let deliveryDetails = try await Amplify.Auth.resendConfirmationCode(forUserAttributeKey: .email)
        print("Resend code send to - \(deliveryDetails)")
    } catch let error as AuthError {
        print("Resend code failed with error \(error)")
    } catch {
        print("Unexpected error: \(error)")
    }
}
```

</Block>

<Block name="Combine">

```swift
func resendCode() -> AnyCancellable {
    Amplify.Publisher.create {
        try await Amplify.Auth.resendConfirmationCode(forUserAttributeKey: .email)
        }.sink {
            if case let .failure(authError) = $0 {
                print("Resend code failed with error \(authError)")
            }
        }
        receiveValue: { deliveryDetails in
            print("Resend code sent to - \(deliveryDetails)")
        }
}
```

</Block>

</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['angular','javascript','nextjs','react','react-native','vue']}>

### Delete user attributes

The `deleteUserAttributes` API allows to delete one or more user attributes.

<BlockSwitcher>
<Block name="TypeScript">

```ts
import {
  deleteUserAttributes,
  type DeleteUserAttributesInput
} from 'aws-amplify/auth';

async function handleDeleteUserAttributes(
  keys: DeleteUserAttributesInput['userAttributeKeys']
) {
  try {
    await deleteUserAttributes({
      userAttributeKeys: ['custom:my_custom_attribute', ...keys]
    });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
<Block name="JavaScript">

```js
import { deleteUserAttributes } from 'aws-amplify/auth';

async function handleDeleteUserAttributes(keys) {
  try {
    await deleteUserAttributes({
      userAttributeKeys: ['custom:my_custom_attribute', ...keys]
    });
  } catch (error) {
    console.log(error);
  }
}
```

</Block>
</BlockSwitcher>

By following the above steps your users can now update, verify, and delete specific user attributes as their information changes over time.
</InlineFilter>

## Conclusion

Congratulations! You finished the **Manage user profiles** guide and your users can now review and customize their profile information.

### Next steps

Now that you completed setting up user profile management, you may also want to add some additional features. We recommend:

- [Set up password change and recovery](/[platform]/build-a-backend/auth/password-management)
- [Custom Attributes](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-attributes.html#user-pool-settings-custom-attributes)
