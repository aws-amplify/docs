import { getCustomStaticPath } from '@/utils/getCustomStaticPath';

export const meta = {
  title: 'Set up fullstack project',
  description: 'Getting started with Amplify - Set up a fullstack project',
  platforms: [
    'android',
    'angular',
    'flutter',
    'javascript',
    'nextjs',
    'swift',
    'react',
    'react-native',
    'vue'
  ]
};

export const getStaticPaths = async () => {
  return getCustomStaticPath(meta.platforms);
};

export function getStaticProps(context) {
  return {
    props: {
      platform: context.params.platform,
      meta
    }
  };
}

import ios7 from '/src/fragments/start/getting-started/ios/setup.mdx';

<Fragments fragments={{ swift: ios7 }} />

import android8 from '/src/fragments/start/getting-started/android/setup.mdx';

<Fragments fragments={{ android: android8 }} />

import flutter9 from '/src/fragments/start/getting-started/flutter/setup.mdx';

<Fragments fragments={{ flutter: flutter9 }} />

<InlineFilter filters={['javascript','react','angular','nextjs','react-native','vue']}>

<InlineFilter filters={['javascript']}>

Create a new Vanilla JavaScript app with vite using the following commands, create the directory (`amplify-js-app`) and files for the app.

```bash
npm create vite@latest
✔ Project name: amplify-js-app
✔ Select a framework: › Vanilla
✔ Select a variant: › JavaScript
```

Initialize npm and install dependencies and dev dependencies.

```bash
cd amplify-js-app
npm install
npm run dev
```

This runs a development server and allows you to see the output generated by the build. You can see the running app by navigating to [http://localhost:5173](http://localhost:5173).

Add the following to the `index.html` file:

```html title="index.html"
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Amplify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="app">
      <div class="app-header">
        <h1>Welcome to Amplify</h1>
      </div>
      <div class="app-body">
        <h1>Mutation Results</h1>
        <button id="MutationEventButton">Add data</button>
        <div id="MutationResult"></div>
        <hr />

        <h1>Query Results</h1>
        <div id="QueryResult"></div>
        <hr />

        <h1>Subscription Results</h1>
        <div id="SubscriptionResult"></div>
      </div>
    </div>
    <script type="module" src="/main.js"></script>
  </body>
</html>
```

Add the following to `style.css` file:

```css title="style.css"
html,
body {
  font-family: 'Amazon Ember', 'Helvetica', 'sans-serif';
  margin: 0;
}
a {
  color: #ff9900;
}
h1 {
  font-weight: 300;
}
hr {
  height: 1px;
  background: lightgray;
  border: none;
}
.app {
  width: 100%;
}
.app-header {
  color: white;
  text-align: center;
  background: linear-gradient(30deg, #f90 55%, #ffc300);
  width: 100%;
  margin: 0 0 1em 0;
  padding: 3em 0 3em 0;
  box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);
}
.app-body {
  width: 400px;
  margin: 0 auto;
  text-align: center;
}
.app-body button {
  background-color: #ff9900;
  font-size: 14px;
  color: white;
  text-transform: uppercase;
  padding: 1em;
  border: none;
}
.app-body button:hover {
  opacity: 0.8;
}
```

In `main.js` remove the boilerplate code and leave it empty. Then refresh the browser to see the changes.

</InlineFilter>

<InlineFilter filters={['react']}>

## Create a new React App

To get started, first create a new React app, and then install and use the Amplify CLI to start adding backend capabilities to your app.

From your projects directory, run the following command and respond the prompts:

<BlockSwitcher>
  <Block name="TypeScript">

    ```bash
    npm create vite@latest
    ✔ Project name: react-amplified
    ✔ Select a framework: › React
    ✔ Select a variant: › TypeScript
    ```

  </Block>
  <Block name="JavaScript">

    ```bash
    npm create vite@latest
    ✔ Project name: react-amplified
    ✔ Select a framework: › React
    ✔ Select a variant: › JavaScript
    ```

  </Block>
</BlockSwitcher>

This creates a new React app in a directory called **react-amplified**. You can then run the following commands to switch into the new **react-amplified** directory, install the project dependencies, and run the app:

```bash
cd react-amplified
npm install
npm run dev
```

This runs a development server and allows you to see the output generated by the build. You can see the running app by navigating to [http://localhost:5173](http://localhost:5173).

</InlineFilter>

<InlineFilter filters={['angular']}>

Use the [Angular CLI](https://angular.dev/tools/cli) to bootstrap a new Angular app:

```bash
npx -p @angular/cli ng new amplify-app
```

```console
? Which stylesheet format would you like to use? CSS
? Do you want to enable Server-Side Rendering (SSR) and Static Site Generation (SSG/Pre-rendering)? No
```

This is create your angular app in a folder `amplify-app`. Use the following command to switch into that folder:

```bash
cd amplify-app
```

</InlineFilter>

<InlineFilter filters={['nextjs']}>

<Callout>

This tutorial is built using the [Next.js App Router](https://nextjs.org/docs/app/building-your-application/routing).

</Callout>

To set up the project, you'll first create a new Next.js app with [Create Next App](https://nextjs.org/docs/api-reference/create-next-app), a simple CLI tool that enables you to quickly start building a new Next.js application, with everything set up for you. You'll then add Amplify and initialize a new project.

From your projects directory, run the following commands:

```bash
npm create next-app@14 -- next-amplified --ts --no-eslint --src-dir --import-alias '@/*' --no-tailwind --app
cd next-amplified
```

This command will bootstrap the project with the following options:

- App Router
- TypeScript
- No ESLint
- With the `src` directory
- No Tailwind CSS
- imports aliased to `@/` (the default)

Now that you're in the root of the project, you can run the app by using the following command:

```bash
npm run dev
```

This runs a development server and allows us to see the output generated by the build, you can see the running app by navigating to \http://localhost:3000>.

</InlineFilter>

<InlineFilter filters={['react-native']}>

To get started, initialize a new React Native project.

<BlockSwitcher>
<Block name="Expo CLI">

Create a new app with the following command:

```sh
npx create-expo-app amplified_todo

cd amplified_todo
```

Start the app with the following command:

For Android:

```sh
npx expo run:android
```

For iOS:

```sh
npx expo run:ios
```

Follow the additional prompts to configure your build and allow it some time to process. When ready, you app should launch in the respective simulator.

</Block>
<Block name="React Native CLI">

After you [setup development environment](https://reactnative.dev/docs/environment-setup), create a new app with the following command:

```bash
npx react-native init amplified_todo

cd amplified_todo
```

Start the app with the following command:

```bash
npm start
```

```console
r - reload the app
d - open developer menu
i - run on iOS
a - run on Android
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['vue']}>

Use the Vue Vite powered `create-app` to bootstrap a new Vue 3 app (selecting the defaults will work for this project):

```bash
npm init vue@3

Need to install the following packages:
  create-vue@3
Ok to proceed? (y) y

✔ Project name: … vue-amplified
✔ Add TypeScript? … No
✔ Add JSX Support? … No
✔ Add Vue Router for Single Page Application development? … No
✔ Add Pinia for state management? … No
✔ Add Vitest for Unit Testing? … No
✔ Add Cypress for both Unit and End-to-End testing? … No
✔ Add ESLint for code quality? … No
```

This creates a new Vue app in a directory called vue-amplified. You can then run the following commands to switch into the new vue-amplified directory, install the project dependencies, and run the app:

```bash
cd vue-amplified
npm install
npm run dev
```

</InlineFilter>

## Initialize a new backend

Now that you have a running app, it's time to set up Amplify so that you can create the necessary backend services needed to support the app.

Open a new terminal. From the root of the project, run:

```bash
amplify init
```

When you initialize Amplify you'll be prompted for some information about the app:

<InlineFilter filters={['javascript']}>

```console
? Enter a name for the project: amplifyjsapp
The following configuration will be applied:

Project information
| Name: amplifyjsapp
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: none
| Source Directory Path: src
| Distribution Directory Path: dist
| Build Command: npm run-script build
| Start Command: npm run-script start

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile

For more information on AWS Profiles, see:
https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html

? Please choose the profile you want to use: default
```

</InlineFilter>

<InlineFilter filters={['react']}>

```console
? Enter a name for the project reactamplified
The following configuration will be applied:

?Project information
| Name:  reactamplified
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: react
| Source Directory Path: src
```

<Callout>

Make sure to set **dist** as the _Distribution Directory Path_.

</Callout>

```console
| Distribution Directory Path: dist
```

```console
| Build Command: npm run-script build
| Start Command: npm run-script start

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile

...

? Please choose the profile you want to use default
```

</InlineFilter>

<InlineFilter filters={['angular']}>

For newer versions of Angular, you will have to change the Distribution Directory Path from `dist` to `dist/amplify-app/browser` to match how Angular will build your project.

```console
? Enter a name for the project: amplifyapp
The following configuration will be applied:

Project information
| Name: amplifyapp
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: angular
| Source Directory Path: src
| Distribution Directory Path: dist
| Build Command: npm run-script build
| Start Command: ng serve

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile

For more information on AWS Profiles, see:
https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html

? Please choose the profile you want to use: default
```

</InlineFilter>

<InlineFilter filters={['nextjs']}>

```console
? Enter a name for the project (nextamplified)
The following configuration will be applied:

Project information
| Name: next-amplified
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: react
| Source Directory Path: src
| Distribution Directory Path: build
| Build Command: npm run-script build
| Start Command: npm run-script start

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile

For more information on AWS Profiles, see:
https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html

? Please choose the profile you want to use: default
```

</InlineFilter>

<InlineFilter filters={['react-native']}>

```console
? Enter a name for the project (amplified_todo)
The following configuration will be applied:

Project information
| Name: amplified_todo
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: react-native
| Source Directory Path: /
| Distribution Directory Path: /
| Build Command: npm run-script build
| Start Command: npm run-script start

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile
? Please choose the profile you want to use default
```

</InlineFilter>

<InlineFilter filters={['vue']}>

Your backend needs a project name to use when creating resources. Give your backend project the name `todo`

```console
? Enter a name for the project (myamplifyproject) todo
```

You'll then be asked to accept some recommended values:

```
The following configuration will be applied:

Project information
| Name: todo
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: vue
| Source Directory Path: src
| Distribution Directory Path: dist
| Build Command: npm run-script build
| Start Command: npm run-script serve

? Initialize the project with the above configuration? Yes

```

> Where possible the CLI will infer the proper configuration based on the type of project Amplify is being initialized in. In this case it knew you are using Vue and provided the proper configuration for type of app, framework, source, distribution, build, and start options.

Next, you will need to select the authentication method you want to use to work on your project locally:

```
? Select the authentication method you want to use: (Use arrow keys)
> AWS profile
  AWS access keys
```

Select AWS profile and then choose the profile you configured in the [Prerequisites](/[platform]/start/getting-started/installation/).

</InlineFilter>

When you initialize a new Amplify project, a few things happen:

- It creates a top level directory called `amplify` that stores your backend definition. During the tutorial you'll add cloud capabilities, such as GraphQL API and web hosting. As you add these features, the `amplify` folder will grow with infrastructure-as-code templates that define your backend stack. Infrastructure-as-code is a best practice way to create a replicable backend stack.
- It creates a file called `amplifyconfiguration.json` in your designated **Source Directory Path** that holds all the configuration for the services you create with Amplify. This is how the Amplify JavaScript client library is able to get the necessary information to connect to your backend services.
- It modifies the `.gitignore` file, adding some generated files to the ignore list

## Install Amplify Libraries

<InlineFilter filters={['react','javascript','vue','angular']}>

The `aws-amplify` package is the main library for working with Amplify Libraries in your projects:

```bash
npm install aws-amplify
```

</InlineFilter>

<InlineFilter filters={['nextjs']}>

The `aws-amplify` package is the main library for working with Amplify Libraries in your projects. The `@aws-amplify/adapter-nextjs` package includes additional Next.js-specific functions for using the Amplify libraries server-side:

```bash
npm install aws-amplify @aws-amplify/adapter-nextjs
```

</InlineFilter>

<InlineFilter filters={['react-native']}>
Install the necessary dependencies by running the following command:

<BlockSwitcher>
<Block name="Expo CLI">

```sh
npm install aws-amplify @aws-amplify/react-native @react-native-community/netinfo @react-native-async-storage/async-storage react-native-get-random-values
```

</Block>
<Block name="React Native CLI">

```sh
npm install aws-amplify @aws-amplify/react-native @react-native-community/netinfo @react-native-async-storage/async-storage react-native-get-random-values
```

`@aws-amplify/react-native` requires a minimum iOS deployment target of `13.0`, open the _Podfile_ located in the _ios_ directory and update the `target` value:

```diff
- platform :ios, min_ios_version_supported
+ platform :ios, 13.0
```

You will also need to install the pod dependencies for iOS:

```sh
npx pod-install
```

</Block>
</BlockSwitcher>

<Callout>

**Note:** Be sure to install `@react-native-async-storage/async-storage` and `react-native-get-random-values` or you will face errors at runtime.

</Callout>

</InlineFilter>

<InlineFilter filters={["angular"]}>

<Callout>

Angular CLI output warnings: if you see CommonJS or AMD dependencies optimization bailouts warnings using Angular 9+, you can use this [gist](https://gist.github.com/wlee221/6d98d96740bea6f53327b4db4a432616) to remove them. More details about these [here](https://angular.io/guide/build#configuring-commonjs-dependencies).

</Callout>

</InlineFilter>

<InlineFilter filters={['react','javascript','angular','vue']}>
## Set up frontend

Next, configure the Amplify libraries client-side so it can interact with backend services.

    <InlineFilter filters={['react']}>
        Open **src/main.tsx** or **src/main.jsx** and add the following code below the last import:
    </InlineFilter>

    <InlineFilter filters={['javascript']}>
        Open **main.js** and add the following code:
    </InlineFilter>

    <InlineFilter filters={['angular']}>
        Open **main.ts** and add the following code below the last import:
    </InlineFilter>

    <InlineFilter filters={['nextjs']}>
        If you are using Next.js Pages Router, open **pages/_app.js** and add the following code below the last import:
    </InlineFilter>

    <InlineFilter filters={['vue']}>
        Open **src/main.js** and add the following code below the last import:
    </InlineFilter>

    <InlineFilter filters={["angular", "react", "vue"]}>

    ```javascript title="src/main.jsx"
    import { Amplify } from 'aws-amplify';
    import amplifyconfig from './amplifyconfiguration.json';
    Amplify.configure(amplifyconfig);
    ```

    </InlineFilter>


    <InlineFilter filters={["javascript"]}>

    ```javascript title="main.js"
    import './style.css'
    import { Amplify } from 'aws-amplify';
    import amplifyconfig from './src/amplifyconfiguration.json';
    Amplify.configure(amplifyconfig);
    ```

    </InlineFilter>

</InlineFilter>

<InlineFilter filters={['react-native']}>

<BlockSwitcher>
<Block name="Expo CLI">

```javascript
// App.js

import { Amplify } from 'aws-amplify';
import amplifyconfig from './src/amplifyconfiguration.json';
Amplify.configure(amplifyconfig);
```

</Block>
<Block name="React Native CLI">

```javascript
// index.js

import { Amplify } from 'aws-amplify';
import amplifyconfig from './src/amplifyconfiguration.json';
Amplify.configure(amplifyconfig);
```

</Block>
</BlockSwitcher>

</InlineFilter>

<InlineFilter filters={['angular']}>

In order to import `amplifyconfiguration.json` files in Typescript, you may need to modify your tsconfig.json and enable `resolveJsonModule` and `allowSyntheticDefaultImports` in the case that `strict` mode is enabled.

```json
{
  ...
  "compilerOptions": {
    "allowSyntheticDefaultImports": true,
    "resolveJsonModule": true,
    ...
  }
}
```

</InlineFilter>

<InlineFilter filters={["javascript", "react", "angular", "react-native", "vue"]}>

And that's all it takes to configure Amplify. As you add or remove categories and make updates to your backend configuration using the Amplify CLI, the configuration in **amplifyconfiguration.json** will update automatically.

Now that your app is set up and Amplify is initialized, you can add an API in the next step.

</InlineFilter>

<InlineFilter filters={["nextjs"]}>

That's all it takes to install Amplify libraries with your Next.js application. Next, we'll create a new backend API and database tables. Then, we'll use the Amplify library's Next.js adapter to make API requests to your new backend.

</InlineFilter>

</InlineFilter>
